namespace.reg("uinv.FCM.configMgr");namespace.reg("uinv.FCM.configMgr.global");namespace.reg("uinv.FCM.configMgr.note");namespace.reg("uinv.FCM.configMgr.model.transform");namespace.reg("uinv.FCM.configMgr.model.array");namespace.reg("uinv.FCM.configMgr.model.selector");namespace.reg("uinv.FCM.configMgr.model.selector.whereTypeSetObj");namespace.reg("uinv.FCM.configMgr.model.stringDB");namespace.reg("uinv.FCM.configMgr.model.key");namespace.reg("uinv.FCM.configMgr.model.layer");namespace.reg("uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml");namespace.reg("uinv.FCM.configMgr.model.layer.itemConfigInitData");namespace.reg("uinv.FCM.configMgr.model.layer.itemConfigSetData");namespace.reg("uinv.FCM.configMgr.model.panel");namespace.reg("uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml");namespace.reg("uinv.FCM.configMgr.model.panel.itemConfigInitData");namespace.reg("uinv.FCM.configMgr.model.panel.itemConfigSetData");namespace.reg("uinv.FCM.configMgr.model.object");namespace.reg("uinv.FCM.configMgr.model.colorpicke");namespace.reg("uinv.FCM.configMgr.model.dialog");namespace.reg("uinv.FCM.configMgr.model.statistics");namespace.reg("uinv.FCM.configMgr.model.resources");namespace.reg("uinv.FCM.configMgr.model.viewpoint");namespace.reg("uinv.FCM.configMgr.model.string");namespace.reg("uinv.FCM.configMgr.model.backup");namespace.reg("uinv.FCM.configMgr.model.monitor");namespace.reg("uinv.FCM.configMgr.model.monitor.configSetData");namespace.reg("uinv.FCM.configMgr.model.monitor.configTypeToHtml");namespace.reg("uinv.FCM.configMgr.model.monitor.configTypeToData");namespace.reg("uinv.FCM.configMgr.model.monitor.configStyleTypeToData");namespace.reg("uinv.FCM.configMgr.model.download");namespace.reg("uinv.FCM.configMgr.model.images");namespace.reg("uinv.FCM.configMgr.form");namespace.reg("uinv.FCM.configMgr.form.createTypeHtml");namespace.reg("uinv.FCM.configMgr.form.type");namespace.reg("uinv.FCM.configMgr.form.setValue");namespace.reg("uinv.FCM.configMgr.data");namespace.reg("uinv.FCM.configMgr.other");namespace.reg("uinv.FCM.configMgr.api");namespace.reg("uinv.FCM.configMgr.translate");namespace.reg("uinv.FCM.configMgr.msg");namespace.reg("uinv.FCM.configMgr.template");uinv.FCM.configMgr.api.getMonitor=function(){var v=uinv.FCM.configMgr;var t=this;var l=v.model.object.clone(v.data.monitor.object);v.model.monitor.obj=v.model.stringDB.get(v.model.monitor.index);for(var q=0,e=l.length;q<e;q++){l[q].condition=v.other.conditionReplaceName(l[q].where);l[q].data=v.model.object.clone(v.model.monitor.nameFindPanel(l[q].panel));for(var c=0,d=l[q].form.length;c<d;c++){for(var s=0,r=l[q].form[c].styleConfig.length;s<r;s++){l[q].form[c].styleConfig[s].config=v.model.colorpicke.toRgb(l[q].form[c].styleConfig[s].config)}}for(var f in l[q].data.modify){for(var a in l[q].data.modify[f]){if(typeof l[q].form[l[q].data.modify[f][a].row]!="undefined"){l[q].data.showMapping[f][a]=l[q].form[l[q].data.modify[f][a].row][l[q].data.modify[f][a].attribute]}}}for(var b in l[q].config){if(typeof l[q].config[b]=="object"){l[q].data[b]=v.model.object.clone(l[q].config[b])}else{l[q].data[b]=l[q].config[b]}}delete l[q].data.des;delete l[q].data.caption;delete l[q].data.name;delete l[q].data.resPath;delete l[q].where;delete l[q].form;delete l[q].key;delete l[q].panel;delete l[q].config}return{monitorTime:v.data.monitor.alarm.monitorTime,monitorManagerOvertime:v.data.monitor.alarm.monitorManagerOvertime,monitorManagerInDeviceIntervalTime:v.data.monitor.alarm.monitorManagerInDeviceIntervalTime,monitorManagerInDeviceOvertime:v.data.monitor.alarm.monitorManagerInDeviceOvertime,monitorManagerIconScale:v.data.monitor.alarm.monitorManagerIconScale,monitorPanelConfig:l}};uinv.FCM.configMgr.api.getViewpoint=function(){var d=uinv.FCM.configMgr;var e=this;var c=d.model.object.clone(d.data.viewpoint);for(var b=0,a=c.length;b<a;b++){c[b].condition=d.other.conditionReplaceName(c[b].where);delete c[b].where}return c};uinv.FCM.configMgr.api.setViewpoint=function(c,f){var e=uinv.FCM.configMgr;var g=this;var d,b,a;d=e.data.viewpoint;for(b=0,a=d.length;b<a;b++){if(d[b].key==c){d[b].data.x=typeof f.x=="undefined"?d[b].data.x:f.x;d[b].data.y=typeof f.y=="undefined"?d[b].data.y:f.y;d[b].data.z=typeof f.z=="undefined"?d[b].data.z:f.z;e.form.saveData();return true}}return false};uinv.FCM.configMgr.api.getStatistics=function(){var d=uinv.FCM.configMgr;var f=this;var c=d.model.object.clone(d.data.statistics);for(var b in c){for(var e=0,a=c[b].length;e<a;e++){c[b][e].condition=c[b][e].where;delete c[b][e].where;c[b][e].config=d.model.colorpicke.toRgb(c[b][e].color);c[b][e].number=Number(c[b][e].number);delete c[b][e].color}}return c};uinv.FCM.configMgr.api.getResources=function(){var c=uinv.FCM.configMgr;var d=this;var b=c.model.object.clone(c.data.resources);for(var a in b){b[a].local=b[a].localPath;b[a].url=b[a].serverPath.substr(1);delete b[a].localPath;delete b[a].serverPath}return b};uinv.FCM.configMgr.api.getLayer=function(){var e=uinv.FCM.configMgr;var g=this;var d=e.model.object.clone(e.data.layer);e.model.layer.obj=e.model.stringDB.get(e.model.layer.index);for(var c=0,b=d.length;c<b;c++){d[c].condition=e.other.conditionReplaceName(d[c].obj);d[c].tmp=[];for(var f=0,a=d[c].item.length;f<a;f++){if(typeof d[c].itemData=="undefined"){d[c].itemData=[]}d[c].tmp.push({itemName:d[c].item[f]==u.le.get("分割线")?"separator":d[c].item[f],config:typeof d[c].itemData[d[c].item[f]]=="undefined"?{}:e.model.object.clone(d[c].itemData[d[c].item[f]])})}d[c].item=d[c].tmp;delete d[c].obj;delete d[c].tmp;delete d[c].order}return{objects:d,lib:e.model.object.clone(e.model.layer.obj)}};uinv.FCM.configMgr.api.getPanel=function(){var e=uinv.FCM.configMgr;var g=this;var d=e.model.object.clone(e.data.panel);e.model.panel.obj=e.model.stringDB.get(e.model.panel.index);for(var c=0,b=d.length;c<b;c++){d[c].condition=e.other.conditionReplaceName(d[c].obj);d[c].tmp=[];for(var f=0,a=d[c].item.length;f<a;f++){if(typeof d[c].itemData=="undefined"){d[c].itemData=[]}d[c].tmp.push({itemName:d[c].item[f]==u.le.get("分割线")?"separator":d[c].item[f],config:typeof d[c].itemData[d[c].item[f]]=="undefined"?{}:e.model.object.clone(d[c].itemData[d[c].item[f]])})}d[c].item=d[c].tmp;delete d[c].obj;delete d[c].tmp;delete d[c].order}return{objects:d,lib:e.model.object.clone(e.model.panel.obj)}};uinv.FCM.configMgr.api.getForm=function(d){var f=uinv.FCM.configMgr,g=this,c=0,b=0;var e=f.model.object.clone(f.form.createFormData);for(c=0,b=e.length;c<b;c++){if(f.form.inSpecialType(e[c].type)){e.splice(c,1);c--;b=e.length}}for(c=0,b=e.length;c<b;c++){e[c].value=f.data[e[c].group][e[c].name];if(e[c].type=="color"){e[c].value=f.model.colorpicke.toRgb(e[c].value)}}if(d){var a=[];for(c=0,b=e.length;c<b;c++){if(e[c].group==d){a.push(e[c])}}e=a}return e};uinv.FCM.configMgr.api.setForm=function(c,a,b){var d=uinv.FCM.configMgr,e=this;if(typeof d.data[c]=="object"&&typeof d.data[c][a]=="object"){d.data[c][a]=b;d.form.saveData();return true}else{return false}};uinv.FCM.configMgr.api.getAlarm=function(){var d=uinv.FCM.configMgr;var e=this;var c=d.model.object.clone(d.data.monitor.alarm);if(typeof c.alarmLevel=="undefined"){c.alarmLevel=[]}for(var b=0,a=c.alarmLevel.length;b<a;b++){c.alarmLevel[b].config=d.model.colorpicke.toRgb(c.alarmLevel[b].color);delete c.alarmLevel[b].color}delete c.monitorTime;c.alarmManagerOvertime=d.data.monitor.alarm.alarmManagerOvertime;return c};uinv.FCM.configMgr.api.getDownload=function(){var a=uinv.FCM.configMgr;var b=this;return a.model.object.clone(a.data.download)};uinv.FCM.configMgr.api.nameFindDom=function(a){var b=uinv.FCM.configMgr;var c=this;return b.form.box.find("*[name="+a+"][cate][path]")};uinv.FCM.configMgr.api.setBackupIndex=function(c){var b=uinv.FCM.configMgr;var d=this;var a;for(a in c){if(!b.model.array.inArray(c[a],b.model.backup.backModel)){b.model.backup.backModel.push(c[a])}b.model.backup.model[c[a]]={data:a}}};uinv.FCM.configMgr.data.system={};uinv.FCM.configMgr.data.layout={};uinv.FCM.configMgr.data.layer=[];uinv.FCM.configMgr.data.panel=[];uinv.FCM.configMgr.data.statistics={power:[],availableU:[],load:[]};uinv.FCM.configMgr.data.resources={};uinv.FCM.configMgr.data.viewpoint=[];uinv.FCM.configMgr.data.monitor={object:[],alarm:{alarmTime:0,alarmIconSize:1,monitorTime:1}};uinv.FCM.configMgr.data.download=[];uinv.FCM.configMgr.form.createFormData=[];uinv.FCM.configMgr.form.nameInit=[];uinv.FCM.configMgr.form.obj=null;uinv.FCM.configMgr.form.box=null;uinv.FCM.configMgr.form.keywords=["download","layer","monitor","panel","resources","statistics","viewpoint"];uinv.FCM.configMgr.form.specialType=["line","title"];uinv.FCM.configMgr.form.inSpecialType=function(c){var d=this;var b,a;for(b=0,a=d.specialType.length;b<a;b++){if(d.specialType[b]==c){return true}}return false};uinv.FCM.configMgr.form.tabFindItem=function(d){var e=this;var a=[];for(var c=0,b=e.createFormData.length;c<b;c++){if(e.createFormData[c].tab==d){a.push(e.createFormData[c])}}return a};uinv.FCM.configMgr.form.checkFormKeyword=function(){var d=uinv.FCM.configMgr;var f=this;for(var e=0,a=f.createFormData.length;e<a;e++){for(var c=0,b=f.keywords.length;c<b;c++){if(f.createFormData[e].group===f.keywords[c]){return true}}}return false};uinv.FCM.configMgr.form.createHtml=function(e){var d=uinv.FCM.configMgr;var f=this;e.data=f.tabFindItem(e.tab);var c="";for(var b=0,a=e.data.length;b<a;b++){if(typeof f.createTypeHtml[e.data[b].type]=="function"){c+=f.createTypeHtml[e.data[b].type](e.data[b])}}e.dom.html(c)};uinv.FCM.configMgr.form.initFormDataToData=function(){var d=uinv.FCM.configMgr;var e=this;var c=e.createFormData;if(e.checkFormKeyword()){d.note.alert(d.msg.S25);return false}for(var b=0,a=c.length;b<a;b++){if(e.inSpecialType(c[b].type)){continue}if(typeof c[b].itemkey=="undefined"){c[b].itemkey=""}if(typeof d.data[c[b].group]=="undefined"){d.data[c[b].group]={}}if(typeof d.data[c[b].group][c[b].name]=="undefined"){d.data[c[b].group][c[b].name]=c[b].defaultValue}}};uinv.FCM.configMgr.form.load=function(b){var a=uinv.FCM.configMgr;var c=this;c.box=b.obj||$(".config-load");c.box.load(a.global.viewsPath+b.page+"?"+Date.parse(new Date()),function(e,d,f){if(d=="success"){c.init();$(".config-submit-btn").show()}else{$(this).load(a.global.errorPage)}uinv.FCM.configMgr.translate()})};uinv.FCM.configMgr.form.submit=function(){var a=uinv.FCM.configMgr;var b=this;b.nameInit=[];b.box.find("*[name][cate][path]").each(function(){if(typeof b.setValue[$(this).attr("cate")]=="function"){b.setValue[$(this).attr("cate")](this)}});uinv.server.manager.frame.saveFrameConfig(uinv.util.toJSON(a.data),function(c){a.note.dialog(c.data);if(c.success&&typeof b.submitCallback=="function"){b.submitCallback()}});for(i=0,k=b.createFormData.length;i<k;i++){if(typeof b.createFormData[i].callback==="function"){b.createFormData[i].callback(b.createFormData[i])}}};uinv.FCM.configMgr.form.saveData=function(){var a=uinv.FCM.configMgr;var b=this;uinv.server.manager.frame.saveFrameConfig(uinv.util.toJSON(a.data),function(c){if(c.success&&typeof b.submitCallback=="function"){b.submitCallback()}})};uinv.FCM.configMgr.form.isNameFirstEach=function(a){var b=uinv.FCM.configMgr;var c=this;if(b.model.array.inArray(a,c.nameInit)){return false}return true};uinv.FCM.configMgr.form.init=function(){var a=uinv.FCM.configMgr;var b=this;b.box.find("*[name][cate]").each(function(){if(typeof b.type[$(this).attr("cate")]=="function"){b.type[$(this).attr("cate")](this)}});a.translate()};uinv.FCM.configMgr.form.createTypeHtml.bool=function(d){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var b=d.itemkey===""?c.data[d.group][d.name]:c.data[d.group][d.name][d.itemkey],a="";a=c.template.load("form/bool.html",{value:b,classValue:d.level,itemkey:d.itemkey,group:d.group,name:d.name,caption:d.caption});return a};uinv.FCM.configMgr.form.createTypeHtml.color=function(d){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var b=d.itemkey===""?c.data[d.group][d.name]:c.data[d.group][d.name][d.itemkey],a="";a=c.template.load("form/inputText.html",{value:b,classValue:d.level,itemkey:d.itemkey,group:d.group,name:d.name,caption:d.caption,cate:"color"});return a};uinv.FCM.configMgr.form.createTypeHtml.image=function(d){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var b=d.itemkey===""?c.data[d.group][d.name]:c.data[d.group][d.name][d.itemkey],a="";a=c.template.load("form/image.html",{value:b,classValue:d.level+" "+d.name,itemkey:d.itemkey,group:d.group,name:d.name,caption:d.caption,dir:d.dir});return a};uinv.FCM.configMgr.form.createTypeHtml.number=function(d){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var b=d.itemkey===""?c.data[d.group][d.name]:c.data[d.group][d.name][d.itemkey],a="";a=c.template.load("form/inputText.html",{value:b,classValue:d.level,itemkey:d.itemkey,group:d.group,name:d.name,caption:d.caption,cate:"number"});return a};uinv.FCM.configMgr.form.createTypeHtml.string=function(d){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var b=d.itemkey===""?c.data[d.group][d.name]:c.data[d.group][d.name][d.itemkey],a="";a=c.template.load("form/inputText.html",{value:b,classValue:d.level,itemkey:d.itemkey,group:d.group,name:d.name,caption:d.caption,cate:"string"});return a};uinv.FCM.configMgr.form.createTypeHtml.array=function(f){var e=uinv.FCM.configMgr;var g=uinv.FCM.configMgr.form;var c="",d="";for(var b=0,a=f.settings.length;b<a;b++){if(typeof g.createTypeHtml[f.settings[b].type]=="function"){f.settings[b].name=f.name;f.settings[b].group=f.group;f.settings[b].cate="arrayitem";f.settings[b].level="children";f.settings[b].defaultValue=f.defaultValue[b];f.settings[b].itemkey=b;d+=g.createTypeHtml[f.settings[b].type](f.settings[b])}}c=e.template.load("form/array.html",{classValue:f.level,caption:f.caption,contents:d});return c};uinv.FCM.configMgr.form.createTypeHtml.line=function(c){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.form;var a="";a=b.template.load("form/line.html",{classValue:c.style});return a};uinv.FCM.configMgr.form.createTypeHtml.title=function(c){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.form;var a="";a=b.template.load("form/title.html",{classValue:c.style,info:c.caption});return a};uinv.FCM.configMgr.form.setValue.radio=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if(a.checked===true){if($(a).attr("itemkey")!==""){b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=c.box.find("*[name="+$(a).attr("name")+"]:checked").attr("value")}else{b.data[$(a).attr("path")][$(a).attr("name")]=c.box.find("*[name="+$(a).attr("name")+"]:checked").attr("value")}}};uinv.FCM.configMgr.form.setValue.bool=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if(a.checked===true){if($(a).attr("itemkey")!==""){if(a.value=="1"){b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=true}else{b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=false}}else{if(a.value=="1"){b.data[$(a).attr("path")][$(a).attr("name")]=true}else{b.data[$(a).attr("path")][$(a).attr("name")]=false}}}};uinv.FCM.configMgr.form.setValue.text=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=$(a).val()}else{b.data[$(a).attr("path")][$(a).attr("name")]=$(a).val()}};uinv.FCM.configMgr.form.setValue.string=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=$(a).val()}else{b.data[$(a).attr("path")][$(a).attr("name")]=$(a).val()}};uinv.FCM.configMgr.form.setValue.number=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=Number($(a).val())}else{b.data[$(a).attr("path")][$(a).attr("name")]=Number($(a).val())}};uinv.FCM.configMgr.form.setValue.image=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=$(a).attr("src")}else{b.data[$(a).attr("path")][$(a).attr("name")]=$(a).attr("src")}};uinv.FCM.configMgr.form.setValue.color=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]=$(a).val()}else{b.data[$(a).attr("path")][$(a).attr("name")]=$(a).val()}};uinv.FCM.configMgr.form.setValue.layer=function(b){var d=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var a=$(b).attr("name");var c=d.model.layer.keyFindObj(a);if(e.isNameFirstEach(a)){c.item=[];c.order=[];e.nameInit.push(a)}c.order.push($(b).attr("value"));if(b.checked===true){c.item.push($(b).attr("value"))}};uinv.FCM.configMgr.form.setValue.panel=function(c){var d=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var b=$(c).attr("name");var a=d.model.panel.keyFindObj(b);if(e.isNameFirstEach(b)){a.item=[];a.order=[];e.nameInit.push(b)}a.order.push($(c).attr("value"));if(c.checked===true){a.item.push($(c).attr("value"))}};uinv.FCM.configMgr.form.setValue.statistics=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.form;var a=$(b).attr("name");if(d.isNameFirstEach(a)){c.data[$(b).attr("path")][a]=[];d.nameInit.push(a)}$(b).find(".item").each(function(){var e={};$(this).find("*[key]").each(function(){e[$(this).attr("key")]=$(this).val()});c.data[$(b).attr("path")][a].push(e)})};uinv.FCM.configMgr.form.setValue.viewpoint=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;b.model.viewpoint.keyFindObj($(a).attr("name")).data[$(a).attr("key")]=Number($(a).val())};uinv.FCM.configMgr.form.setValue.alarm=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;b.data[$(a).attr("path")].alarm[$(a).attr("name")]=Number($(a).val())};uinv.FCM.configMgr.form.setValue.alarmlevel=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;b.data[$(a).attr("path")].alarm[$(a).attr("name")]=[];$(a).find("*.row").each(function(){var d={};d.name=$(this).find("input[name=name]").val();d.color=$(this).find("input[name=color]").val();b.data[$(a).attr("path")].alarm[$(a).attr("name")].push(d)})};uinv.FCM.configMgr.form.type.radio=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){if(b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]==$(a).attr("value")){$(a).attr("checked",true)}}else{if(b.data[$(a).attr("path")][$(a).attr("name")]==$(a).attr("value")){$(a).attr("checked",true)}}};uinv.FCM.configMgr.form.type.bool=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){if(a.value=="1"&&b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]){$(a).attr("checked",true)}if(a.value=="0"&&!b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")]){$(a).attr("checked",true)}}else{if(a.value=="1"&&b.data[$(a).attr("path")][$(a).attr("name")]){$(a).attr("checked",true)}if(a.value=="0"&&!b.data[$(a).attr("path")][$(a).attr("name")]){$(a).attr("checked",true)}}};uinv.FCM.configMgr.form.type.text=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){$(a).val(b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")])}else{$(a).val(b.data[$(a).attr("path")][$(a).attr("name")])}};uinv.FCM.configMgr.form.type.string=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){$(a).val(b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")])}else{$(a).val(b.data[$(a).attr("path")][$(a).attr("name")])}};uinv.FCM.configMgr.form.type.number=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){$(a).val(b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")])}else{$(a).val(b.data[$(a).attr("path")][$(a).attr("name")])}};uinv.FCM.configMgr.form.type.image=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){$(a).attr("src",b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")])}else{$(a).attr("src",b.data[$(a).attr("path")][$(a).attr("name")])}};uinv.FCM.configMgr.form.type.color=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if($(a).attr("itemkey")!==""){$(a).val(b.data[$(a).attr("path")][$(a).attr("name")][$(a).attr("itemkey")])}else{$(a).val(b.data[$(a).attr("path")][$(a).attr("name")])}b.model.colorpicke.show(a)};uinv.FCM.configMgr.form.type.layer=function(a){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.form;var b=c.model.layer.keyFindObj($(a).attr("name"));if($(a).attr("value")==u.le.get("分割线")){$(a).attr("disabled",true)}if(typeof b.item=="object"){if(c.model.array.inArray($(a).attr("value"),b.item)){$(a).attr("checked",true);c.model.layer.checkd(a)}}};uinv.FCM.configMgr.form.type.panel=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.form;var a=c.model.panel.keyFindObj($(b).attr("name"));if(typeof a.item=="object"){if(c.model.array.inArray($(b).attr("value"),a.item)){$(b).attr("checked",true);c.model.panel.checkd(b)}}};uinv.FCM.configMgr.form.type.statistics=function(c){var d=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.form;var b="";for(var a in d.data[$(c).attr("path")][$(c).attr("name")]){b+=d.model.statistics.mkhtmlTr(d.data[$(c).attr("path")][$(c).attr("name")][a])}$(c).append(b);e.box.find(d.model.statistics.classStr).find("input[key=color]").each(function(){d.model.colorpicke.show(this)})};uinv.FCM.configMgr.form.type.viewpoint=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;$(a).val(b.model.viewpoint.keyFindObj($(a).attr("name")).data[$(a).attr("key")])};uinv.FCM.configMgr.form.type.alarm=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;if(typeof b.data.monitor.alarm[$(a).attr("name")]!="undefined"){$(a).val(b.data[$(a).attr("path")].alarm[$(a).attr("name")])}};uinv.FCM.configMgr.form.type.alarmlevel=function(a){var b=uinv.FCM.configMgr;var c=uinv.FCM.configMgr.form;$(a).find("*.row").each(function(){var d=$(this).find("input[name=color]").get(0);b.model.colorpicke.show(d)})};uinv.FCM.configMgr.global.path="/frontendConfigManager";uinv.FCM.configMgr.global.projectPath="";uinv.FCM.configMgr.global.line1='<i class="config-line1"></i>';uinv.FCM.configMgr.global.onload=false;uinv.FCM.configMgr.global.viewsPath="./javascripts/frontendConfigManager/views/";uinv.FCM.configMgr.global.errorPage="./javascripts/frontendConfigManager/views/404.html";uinv.FCM.configMgr.init=function(){var d=this;var a=uinv.server.manager.frame.getFrameConfig();if(a.success&&a.data){var b=d.model.transform.str2obj(a.data);d.model.object.coverObj(b,uinv.FCM.configMgr.data)}uinv.FCM.configMgr.form.initFormDataToData();uinv.ui.manager.navBar.config["menu-config"]=d.global.viewsPath+"index.html";d.model.selector.obj=d.model.stringDB.get(d.model.selector.index);var c=window.document.location.pathname.split("/");c.pop();d.global.projectPath=c.join("/");Handlebars.registerHelper("ifCond",function(j,f,h,g){var e;switch(f){case"==":e=(j==h)?g.fn(this):g.inverse(this);break;case"===":e=(j===h)?g.fn(this):g.inverse(this);break;case"<":e=(j<h)?g.fn(this):g.inverse(this);break;case"<=":e=(j<=h)?g.fn(this):g.inverse(this);break;case">":e=(j>h)?g.fn(this):g.inverse(this);break;case">=":e=(j>=h)?g.fn(this):g.inverse(this);break;default:e=g.inverse(this);break}return e})};uinv.FCM.configMgr.model.array.inArray=function(d,a){for(var c=0,b=a.length;c<b;c++){if(d==a[c]){return true}}return false};uinv.FCM.configMgr.model.array.strInArrayIndex=function(d,a){for(var c=0,b=a.length;c<b;c++){if(d==a[c]){return c}}return -1};uinv.FCM.configMgr.model.array.isArray=function(a){return a instanceof Array};uinv.FCM.configMgr.model.backup.model={"视角":{model:"viewpoint",data:"viewpoint"},"监控":{model:"monitor",data:"monitor"},"图层":{model:"layer",data:"layer"},"面板":{model:"panel",data:"panel"},"资源":{model:"resources",data:"resources"},"统计":{model:"statistics",data:"statistics"},"选择":{model:"selector",data:"selector"},"下载":{data:"download"}};uinv.FCM.configMgr.model.backup.backModel=["视角","图层","资源","下载","监控","统计","选择","面板"];uinv.FCM.configMgr.model.backup.folders=[];uinv.FCM.configMgr.model.backup.files=[];uinv.FCM.configMgr.model.backup.text="";uinv.FCM.configMgr.model.backup.initData=function(){var a=uinv.FCM.configMgr;var b=this;b.folders=[];b.files=[];b.text=""};uinv.FCM.configMgr.model.backup.updateFileArr=function(){var d=uinv.FCM.configMgr,f=this,e=0,a=[];f.initData();f.folders.push(d.global.path);for(var c=0,b=f.backModel.length;c<b;c++){if(typeof f.model[f.backModel[c]].model!="undefined"&&typeof d.model[f.model[f.backModel[c]].model].backupFiles=="function"){a=d.model[f.model[f.backModel[c]].model].backupFiles();for(e=0,m=a.length;e<m;e++){f.files.push(a[e])}}if(typeof f.model[f.backModel[c]].model!="undefined"&&typeof d.model[f.model[f.backModel[c]].model].backupFolders=="function"){a=d.model[f.model[f.backModel[c]].model].backupFolders();for(e=0,m=a.length;e<m;e++){f.folders.push(a[e])}}}};uinv.FCM.configMgr.model.backup.updateText=function(){var g=uinv.FCM.configMgr;var h=this;var a=g.model.transform.str2obj(uinv.server.manager.frame.getFrameConfig().data);var f=g.model.transform.str2obj(uinv.server.manager.frame.getString().data);var e={config:typeof a==="object"?g.model.object.clone(a):{},string:typeof a==="object"?g.model.object.clone(f):{}};var d={config:{},string:{}};for(var c=0,b=h.backModel.length;c<b;c++){if(typeof h.model[h.backModel[c]].data!="undefined"&&typeof e.config[h.model[h.backModel[c]].data]!="undefined"){d.config[h.model[h.backModel[c]].data]=e.config[h.model[h.backModel[c]].data]}if(typeof h.model[h.backModel[c]].data!="undefined"&&typeof e.string[h.model[h.backModel[c]].data]!="undefined"){d.string[h.model[h.backModel[c]].data]=e.string[h.model[h.backModel[c]].data]}}h.text=g.model.transform.obj2str(d)};uinv.FCM.configMgr.model.backup.configCompression=function(a){var b=uinv.FCM.configMgr;var c=this;$(a).css("left","8888888px").parent().find("span").html(b.msg.S2);c.updateFileArr();c.updateText();uinv.server.manager.frame.placeZip(c.text,c.folders,c.files,function(d){if(d.success){document.location=b.global.projectPath+d.data;$(a).css("left","0").parent().find("span").html(b.msg.S1)}else{b.note.alert(d.data)}})};uinv.FCM.configMgr.model.backup.configUpload=function(d){var f=uinv.FCM.configMgr,h=this,e=null,c=d.value.split("\\"),b=false,a=[],g=c.pop();a=g.split(".");if(a[a.length-1]!="zip"){f.note.alert(f.msg.S3);return false}b=f.note.confirm(f.msg.F1(g));if(!b){return false}uinv.server.manager.frame.upAndUnZip(d,g,function(j){if(j.success){j.data=f.model.string.varFixSub(j.data);try{e=f.model.transform.str2obj(j.data)}catch(l){f.note.alert(f.msg.S4);return false}h.setData(e)}else{f.note.alert(j.data)}})};uinv.FCM.configMgr.model.backup.setData=function(f){var e=uinv.FCM.configMgr;var g=this;var b=0;var a=e.model.transform.str2obj(uinv.server.manager.frame.getFrameConfig().data);var d=e.model.transform.str2obj(uinv.server.manager.frame.getString().data);var c={config:typeof a==="object"?e.model.object.clone(a):{},string:typeof a==="object"?e.model.object.clone(d):{}};if(typeof f.config=="object"){for(b in f.config){c.config[b]=e.model.object.clone(f.config[b])}}if(typeof f.string=="object"){for(b in f.string){c.string[b]=e.model.object.clone(f.string[b])}}uinv.server.manager.frame.saveFrameConfig(e.model.transform.obj2str(c.config));uinv.server.manager.frame.saveString(e.model.transform.obj2str(c.string),false);g.updateConfig(c)};uinv.FCM.configMgr.model.backup.updateConfig=function(b){var a=uinv.FCM.configMgr;var c=this;a.data=a.model.object.clone(b.config);a.form.initFormDataToData();a.form.init()};uinv.FCM.configMgr.model.colorpicke.palette=[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]];uinv.FCM.configMgr.model.colorpicke.toHex=function(b){var e=uinv.FCM.configMgr;var f=this;var a="#";for(var c=0;c<b.length;c++){var d=Number(b[c]).toString(16);if(d==="0"){d+=d}a+=d.substr(2,2)}if(a.length!==7){}return a};uinv.FCM.configMgr.model.colorpicke.toRgb=function(f){var e=uinv.FCM.configMgr,h=this,b=0,a=[],g="",d=f.toLowerCase(),c=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(d&&c.test(d)){if(d.length===4){g="#";for(b=1;b<4;b+=1){g+=d.slice(b,b+1).concat(d.slice(b,b+1))}d=g}a=[];for(b=1;b<7;b+=2){a.push(parseInt("0x"+d.slice(b,b+2),16))}return a}else{return d}};uinv.FCM.configMgr.model.colorpicke.show=function(c){var d=uinv.FCM.configMgr;var e=this;var a=true;var b=c.value.length>=3?c.value:d.data[$(c).attr("path")][$(c).attr("name")];$(c).spectrum({color:b,showInitial:a,showAlpha:a,showPalette:a,showSelectionPalette:a,clickoutFiresChange:a,chooseText:u.le.get("确定"),cancelText:u.le.get("取消"),palette:e.palette,change:function(f){$(this).val(f.toHexString())}}).val(c.value)};uinv.FCM.configMgr.model.dialog.id="";uinv.FCM.configMgr.model.dialog.show=function(c){var b=uinv.FCM.configMgr;var e=this;var a="";e.id=b.model.key.create(10);a=b.template.load("dialog.html",{msg:u.le.get(c),id:e.id});$("body").css("position","relative").append(a);var d=$(".config-dialog-"+e.id);d.css({"margin-left":"-"+parseInt(d.outerWidth()/2,10)+"px","margin-top":"-"+parseInt(d.outerHeight()/2,10)+"px"}).show();b.translate()};uinv.FCM.configMgr.model.dialog.close=function(fun){var _obj=uinv.FCM.configMgr;var _this=this;$(".config-dialog-"+_this.id).remove();$(".config-dialog-bg-"+_this.id).remove();$(".config-dialog").remove();$(".config-dialog-bg").remove();_this.id="";if(typeof fun=="function"){fun.apply(_this)}else{if(fun){eval(fun+"()")}}};uinv.FCM.configMgr.model.dialog.getObj=function(){var a=uinv.FCM.configMgr;var b=this;return $(".config-dialog-"+b.id)};uinv.FCM.configMgr.model.download.pathFindObj=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.download.length;b<a;b++){if(d.data.download[b].url==c){return d.data.download[b]}}return null};uinv.FCM.configMgr.model.download.pathFindIndex=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.download.length;b<a;b++){if(d.data.download[b].url==c){return b}}return -1};uinv.FCM.configMgr.model.download.set=function(d){var c=uinv.FCM.configMgr;var e=this;var a=e.pathFindIndex(d.url);if(a>=0){var b=e.pathFindObj(d.url);d.version=b.version+1;c.data.download.splice(a,1,d)}else{d.version=1;c.data.download.push(d)}};uinv.FCM.configMgr.model.download.del=function(b){var c=uinv.FCM.configMgr;var d=this;var a=d.pathFindIndex(b);c.data.download.splice(a,1)};uinv.FCM.configMgr.model.images.path="/Images";uinv.FCM.configMgr.model.images.dir="";uinv.FCM.configMgr.model.images.imgHeight=50;uinv.FCM.configMgr.model.images.imgWidth=100;uinv.FCM.configMgr.model.images.limit=[".svn"];uinv.FCM.configMgr.model.images.imUpload=function(e,c){var g=uinv.FCM.configMgr;var f=this;f.dir=c||f.dir;var d=e.value.split("\\");var a=encodeURIComponent(d[d.length-1]).replaceAll("%","___");var h=g.global.path+f.path+f.dir;var j=uinv.server.manager.frame.isFileExist(h+"/"+a);var b=true;if(j.data){b=g.note.confirm(g.msg.F2(a))}if(b){uinv.server.manager.frame.upImage(e,h,a,function(l){f.uploadImagesCallback(l)})}};uinv.FCM.configMgr.model.images.delImages=function(d,a){var c=a||window.event;if(c.preventDefault){c.preventDefault()}if(c.stopPropagation){c.stopPropagation()}else{c.returnValue=false;c.cancelBubble=true}var f=uinv.FCM.configMgr;var g=this;var b=f.note.confirm(f.msg.S5);if(b){uinv.server.manager.frame.delImage(d,function(e){g.deleteImagesCallback(e)})}return false};uinv.FCM.configMgr.model.images.close=function(){var a=uinv.FCM.configMgr;var b=this;a.model.dialog.close()};uinv.FCM.configMgr.model.images.uploadImagesCallback=function(a){var b=uinv.FCM.configMgr;var c=this;if(a.success){c.updateList();b.model.dialog.getObj().find(".img .right .views").html("")}else{b.note.alert(a.data)}};uinv.FCM.configMgr.model.images.deleteImagesCallback=function(a){var d=uinv.FCM.configMgr;var e=this;if(a.success){e.updateList();d.model.dialog.getObj().find(".img .right .views").html("");var b=d.model.dialog.getObj().find(".img .left .imglist li.ok img");var c=d.form.box.find("*[name="+e.name+"]");if(c.attr("src")!=b.attr("src")){c.attr("src","")}}};uinv.FCM.configMgr.model.images.selectImg=function(a){var b=uinv.FCM.configMgr;var c=this;b.model.dialog.getObj().find(".img .imglist li.ok").each(function(){$(this).removeClass("ok")});$("*[name="+c.name+"]").attr("src",$(a).find("img").attr("src"));$(a).addClass("ok")};uinv.FCM.configMgr.model.images.getData=function(){var c=uinv.FCM.configMgr;var d=this;var b=c.global.path+d.path+d.dir;var a=uinv.server.manager.frame.getImages(b);if(a.success){return a.data}else{return[]}};uinv.FCM.configMgr.model.images.viewsImg=function(b){var c=uinv.FCM.configMgr;var e=this;var a='<img src="'+$(b).attr("src")+'" />';c.model.dialog.getObj().find(".img .right .views").html(a);var d=c.model.dialog.getObj().find(".img .right .views img");d.css({"margin-left":"-"+parseInt(d.outerWidth()/2,10)+"px","margin-top":"-"+parseInt(d.outerHeight()/2,10)+"px"})};uinv.FCM.configMgr.model.images.decode=function(b){var a=uinv.FCM.configMgr;var c=this;return decodeURIComponent(b.replaceAll("___","%"))};uinv.FCM.configMgr.model.images.updateList=function(){var h=uinv.FCM.configMgr,g=this,e=g.getData(),j="",a="",f=[],b=[],n=h.global.path+g.path+g.dir+"/";for(var d=0,c=e.length;d<c;d++){if(h.model.array.inArray(e[d],g.limit)){continue}var l=h.form.box.find("*[name="+g.name+"]").attr("src");if(l){b=l.split("/");a=b[b.length-1]}else{a=""}j=a==e[d]?"ok":"";f.push(h.template.load("images/li.html",{cla:j,url:h.global.projectPath+n+e[d],path:n+e[d],maxHeight:g.imgHeight,maxWidth:g.imgWidth,title:g.decode(e[d])}))}h.model.dialog.getObj().find(".img .left .imglist").html(f.join(""))};uinv.FCM.configMgr.model.images.out=function(){var b=uinv.FCM.configMgr;var c=this;var a=b.form.box.find("*[name="+c.name+"]").get(0);c.viewsImg(a)};uinv.FCM.configMgr.model.images.show=function(c){var b=uinv.FCM.configMgr;var d=this;d.dir=c.dir||"global";d.name=c.name||"global";if(d.dir.substr(0,1)!="/"){d.dir="/"+d.dir}b.model.dialog.show(b.template.load("images/main.html"));d.updateList();var a=b.model.dialog.getObj().find(".img .left .imglist li.ok img").get(0);uinv.FCM.configMgr.model.images.viewsImg(a)};uinv.FCM.configMgr.model.key.str=["a","b","c","d","e","f","g","h","i","j","k","l","m","o","p","q","r","s","t","x","u","v","y","z","w","n","0","1","2","3","4","5","6","7","8","9"];uinv.FCM.configMgr.model.key.randint=function(d,a){var b=a-d+1;return Math.floor(Math.random()*b+d)};uinv.FCM.configMgr.model.key.randStr=function(){var c=uinv.FCM.configMgr;var d=this;var a=d.str.length-1;var b=d.randint(0,a);return d.str[b]};uinv.FCM.configMgr.model.key.create=function(a){var e=uinv.FCM.configMgr;var f=this;var b=a||10;var d="";for(var c=0;c<b;c++){d+=f.randStr()}return d};uinv.FCM.configMgr.model.layer.globalLayerManagementBoxClass="layer-global";uinv.FCM.configMgr.model.layer.index="layer";uinv.FCM.configMgr.model.layer.uploadLayerSelector="";uinv.FCM.configMgr.model.layer.obj=null;uinv.FCM.configMgr.model.layer.upMoveBtnClass="upmove";uinv.FCM.configMgr.model.layer.classStr="";uinv.FCM.configMgr.model.layer.keyFindObj=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.layer.length;b<a;b++){if(c==d.data.layer[b].key){return d.data.layer[b]}}return{}};uinv.FCM.configMgr.model.layer.keyDelObj=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.layer.length;b<a;b++){if(c==d.data.layer[b].key){d.data.layer.splice(b,1);return true}}return false};uinv.FCM.configMgr.model.layer.createObject=function(){var a=uinv.FCM.configMgr;var b=this;a.model.selector.show(function(f){var c=b.checkObjectExist(f.where);if(c){a.note.alert(a.msg.S6);return false}a.model.selector.cancelAddNodeWhere();var e=b.addObject(f);var d=b.mkhtml(e);$(b.classStr).append(d)})};uinv.FCM.configMgr.model.layer.insertDividingLine=function(d,b){var f=uinv.FCM.configMgr;var g=this;if(!b){f.note.dialog(f.msg.S7);return false}var a=g.mkHtmlList({key:b},{name:u.le.get("分割线")});var c=$(d).parents(".list").find("ul");c.append(a);var e=c.find("li:last").find("*[name][cate][value]").get(0);e.checked=true;g.checkd(e);e.disabled=true};uinv.FCM.configMgr.model.layer.deleteObj=function(a){var b=uinv.FCM.configMgr;var c=this;c.keyDelObj(a);b.form.box.find(".obj-"+a).remove()};uinv.FCM.configMgr.model.layer.deleteObjLayer=function(c){var d=uinv.FCM.configMgr;var e=this;var b=$(c).parents("li").find("*[cate][name][value]").attr("value");if(b==u.le.get("分割线")){$(c).parents("li").remove()}else{com=d.note.confirm(d.msg.S8);if(!com){return false}for(var a in d.data.layer){e.keyDeleteObjLayerLi(d.data.layer[a].key,b);e.keyDeleteObjLayer(d.data.layer[a],b)}}};uinv.FCM.configMgr.model.layer.keyDeleteObjLayer=function(c,b){var d=uinv.FCM.configMgr;var e=this;var a=0;if(d.model.array.inArray(b,c.order)){a=d.model.array.strInArrayIndex(b,c.order);c.order.splice(a,1)}if(d.model.array.inArray(b,c.item)){a=d.model.array.strInArrayIndex(b,c.item);c.item.splice(a,1)}};uinv.FCM.configMgr.model.layer.keyDeleteObjLayerLi=function(a,c){var b=uinv.FCM.configMgr;var d=this;b.form.box.find(d.classStr).find(".obj-"+a).find("li").each(function(){if($(this).find("*[cate][name][value]").attr("value")==c){$(this).remove()}})};uinv.FCM.configMgr.model.layer.modifyObjectName=function(b,d){var e=uinv.FCM.configMgr;var f=this;var c=$(d).html();var a=$(d).parent();a.html(e.template.load("input_text.html",{value:c}));a.find("input").focus().blur(function(){f.keyFindObj(b).name=$(this).val();$(this).parent().html("<span onclick=\"uinv.FCM.configMgr.model.layer.modifyObjectName('"+b+"',this);\">"+$(this).val()+"</span>")}).keydown(function(g){var h=g||windown.event;if(h.keyCode==13){f.keyFindObj(b).name=$(this).val();$(this).parent().html("<span onclick=\"uinv.FCM.configMgr.model.layer.modifyObjectName('"+b+"',this);\">"+$(this).val()+"</span>")}})};uinv.FCM.configMgr.model.layer.mkhtml=function(e){var f=uinv.FCM.configMgr;var g=this;var d="",c="";for(var b=0,a=e.order.length;b<a;b++){if(e.order[b] in g.obj){c+=g.mkHtmlList(e,g.obj[e.order[b]])}else{c+=g.mkHtmlList(e,{name:e.order[b]})}}d=f.template.load("layer/layerListMain.html",{layerLis:c,key:e.key,name:e.name});return d};uinv.FCM.configMgr.model.layer.mkHtmlList=function(d,c){var e=uinv.FCM.configMgr;var g=this;var b=typeof c.__key=="string"?c.__key:c.name,f=c.name==u.le.get("分割线")?"撤销":"删除",a="";a=e.template.load("layer/layerListLi.html",{key:b,objKey:d.key,delbtnValue:f,layerName:c.name,upMoveBtnClass:g.upMoveBtnClass,isViewsEditBtn:typeof c.itemConfig==="object"});return a};uinv.FCM.configMgr.model.layer.itemConfig=function(e,d){var f=uinv.FCM.configMgr;var h=this;if(typeof h.obj[e].itemConfig=="undefined"){h.note.alert(f.msg.S9)}_layer=h.keyFindObj(d);_layer.itemData=typeof _layer.itemData=="undefined"?{}:_layer.itemData;_layer.itemData[e]=typeof _layer.itemData[e]=="undefined"?{}:_layer.itemData[e];var c="",g="";for(var b=0,a=h.obj[e].itemConfig.length;b<a;b++){if(typeof h.itemConfigTypeToHtml[h.obj[e].itemConfig[b].type]=="function"){g+=h.itemConfigTypeToHtml[h.obj[e].itemConfig[b].type](h.obj[e].itemConfig[b],e,d)}}c=f.template.load("layer/itemConfigMain.html",{itemConfigRows:g});f.model.dialog.show(c);h.itemConfigFormInit(d)};uinv.FCM.configMgr.model.layer.itemConfigFormInit=function(){var a=uinv.FCM.configMgr;var b=this;a.model.dialog.getObj().find(".itemConfig").find("*[name][cate][path]").each(function(){if(typeof b.itemConfigInitData[$(this).attr("cate")]=="function"){b.itemConfigInitData[$(this).attr("cate")](this)}})};uinv.FCM.configMgr.model.layer.itemConfigSubmit=function(){var a=uinv.FCM.configMgr;var b=this;a.model.dialog.getObj().find(".itemConfig").find("*[name][cate][path]").each(function(){if(typeof b.itemConfigSetData[$(this).attr("cate")]=="function"){b.itemConfigSetData[$(this).attr("cate")](this)}});a.model.dialog.close()};uinv.FCM.configMgr.model.layer.addLayerOneToObj=function(b,a){var c=uinv.FCM.configMgr;var d=this;c.form.box.find(".obj-"+b).find("ul").append(a)};uinv.FCM.configMgr.model.layer.removeObjLayerIsValue=function(a,b){var c=uinv.FCM.configMgr;var d=this;c.form.box.find(".obj-"+a).find('*[name="'+a+'"][value="'+b+'"]').parents("li").remove()};uinv.FCM.configMgr.model.layer.order=function(c){var d=uinv.FCM.configMgr;var e=this;var b=0;var a=0;d.form.box.find("*[name="+$(c).attr("name")+"]").each(function(f){if(this.checked===true&&this!=c){b++}else{if(this==c){a=f}}});if(a!=b){if(c.checked===true){d.form.box.find("*[name="+$(c).attr("name")+"]:eq("+b+")").parents("li").before($(c).parents("li"))}else{d.form.box.find("*[name="+$(c).attr("name")+"]:eq("+b+")").parents("li").after($(c).parents("li"))}}};uinv.FCM.configMgr.model.layer.showUpMoveBtn=function(a){var b=uinv.FCM.configMgr;var c=this;$(a).parents("li").find("."+c.upMoveBtnClass).show()};uinv.FCM.configMgr.model.layer.hideUpMoveBtn=function(a){var b=uinv.FCM.configMgr;var c=this;$(a).parents("li").find("."+c.upMoveBtnClass).hide()};uinv.FCM.configMgr.model.layer.checkd=function(a){var b=uinv.FCM.configMgr;var c=this;c.order(a);if(a.checked===true){$(a).parents("li").addClass("checked");c.showUpMoveBtn(a)}else{$(a).parents("li").removeClass("checked");c.hideUpMoveBtn(a)}};uinv.FCM.configMgr.model.layer.checkedLayerOrder=function(a){var j=uinv.FCM.configMgr;var g=this;var b=g.keyFindObj(a);var h=j.form.box.find("*[name="+a+"]:checked");if(b.item.length==h.length){for(var e=0,c=b.item.length;e<c;e++){var d=j.form.box.find("*[name="+a+'][value="'+b.item[e]+'"]');var f=d.parents("li").index();if(e!=f){j.form.box.find("*[name="+a+"]:eq("+e+")").parents("li").before(d.parents("li"))}}}};uinv.FCM.configMgr.model.layer.upMove=function(d){var e=uinv.FCM.configMgr;var f=this;var c=$(d).parents("li").find("input[type=checkbox][name]");if(c.get(0).checked===false){return}var b=$(d).parents("li").index();if(b===0){return}b--;var a=c.attr("name");e.form.box.find("*[name="+a+"]:eq("+b+")").parents("li").before($(d).parents("li"))};uinv.FCM.configMgr.model.layer.checkHasKey=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.layer.length;b<a;b++){if(d.data.layer[b].key==c){return true}}return false};uinv.FCM.configMgr.model.layer.addObject=function(e){var f=uinv.FCM.configMgr,g=this,d="",c=null,a=false;do{d=f.model.key.create(32);a=g.checkHasKey(d)}while(a);var b={key:d,name:e.name,obj:e.where,itemConfig:{},order:[],item:[]};for(c in g.obj){b.order.push(c)}f.data.layer.push(b);return b};uinv.FCM.configMgr.model.layer.judgeObjectIsEq=function(c,b){var d=uinv.FCM.configMgr;var e=this;var a=false;if(typeof c.classid!="undefined"&&typeof b.classid!="undefined"&&c.classid==b.classid){a=true}if(typeof c.name!="undefined"&&typeof b.name!="undefined"&&c.name==b.name){a=true}if(typeof c.attribute!="undefined"&&typeof b.attribute!="undefined"&&c.attribute[0].key==b.attribute[0].key&&c.attribute[0].value==b.attribute[0].value){a=true}return a};uinv.FCM.configMgr.model.layer.checkObjectExist=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.layer.length;b<a;b++){if(e.judgeObjectIsEq(c,d.data.layer[b].obj)){return true}}return false};uinv.FCM.configMgr.model.layer.add=function(b,a){var c=uinv.FCM.configMgr;var d=this;if(typeof d.uploadLayerSelector=="undefined"){d.addLayerToGlobalLib(b,d.addLayerToGlobalLibCallback)}else{d.addLayerToObjLib(b,d.addLayerToObjLibCallback)}};uinv.FCM.configMgr.model.layer.addLayerToGlobalLib=function(d,a){var e=uinv.FCM.configMgr;var f=this;var c=typeof d.__key=="string"?d.__key:d.name;f.obj[c]={};for(var b in d){f.obj[c][b]=d[b]}if(typeof a=="function"){a.apply(f,[d])}};uinv.FCM.configMgr.model.layer.addLayerToGlobalLibCallback=function(e){var f=uinv.FCM.configMgr;var g=this;g.obj[e.name]=f.model.object.clone(e);for(var d=0,a=f.data.layer.length;d<a;d++){var c=f.data.layer[d].key;var b=g.mkHtmlList({key:c},e);g.removeObjLayerIsValue(c,e.name);g.addLayerOneToObj(c,b)}};uinv.FCM.configMgr.model.layer.setDBCallback=function(){var a=uinv.FCM.configMgr;var b=this};uinv.FCM.configMgr.model.layer.addLayerToObjLib=function(d,a){var f=uinv.FCM.configMgr;var g=this;var c=d.name;if(typeof d.__key=="string"){c=d.__key}var e=g.keyFindObj(g.uploadLayerSelector);e.lib[c]={};e.order.push(c);for(var b in d){e.lib[c][b]=d[b]}if(typeof a=="function"){a(e,d)}};uinv.FCM.configMgr.model.layer.addLayerToObjLibCallback=function(e,c){var f=uinv.FCM.configMgr;var g=this;var d=true;var b=typeof c.__key=="string"?c.__key:c.name;var a=g.mkHtmlList(e,c);g.removeObjLayerIsValue(e.key,b);g.addLayerOneToObj(e.key,a)};uinv.FCM.configMgr.model.layer.getLayerList=function(){var a=uinv.FCM.configMgr;var b=this;return a.model.stringDB.get(b.index)};uinv.FCM.configMgr.model.layer.upload=function(d,a){var f=uinv.FCM.configMgr;var g=this;if(a){var e=g.keyFindObj(a);if(typeof e.lib=="undefined"){f.note.alert(f.msg.s10);return}}g.uploadLayerSelector=a;var c=$(d).val().split("\\");var b=c[c.length-1];uinv.server.manager.frame.upAndUnZip(d,b,function(h){g.uploadCallback(h)})};uinv.FCM.configMgr.model.layer.uploadCallback=function(a){var f=uinv.FCM.configMgr;var g=this;if(a.success){a.data=f.model.string.varFixSub(a.data);var e=f.model.transform.str2obj(a.data);var c=g.verificationLayerData(e);if(c){if(f.model.array.isArray(e)){for(var d=0,b=e.length;d<b;d++){g.add(e[d],g.addCallback)}}else{g.add(e,g.addCallback)}}f.form.submit()}else{f.note.alert(a.data)}};uinv.FCM.configMgr.model.layer.verificationLayerData=function(c){var d=uinv.FCM.configMgr;var e=this;if(d.model.array.isArray(c)){for(var b=0,a=c.length;b<a;b++){if(!d.model.object.isObject(c[b])||typeof c[b].name=="undefined"){d.note.dialog(d.msg.S11);return false}}return true}else{if(d.model.object.isObject(c)){if(typeof c.name!="undefined"){return true}else{d.note.dialog(d.msg.S11);return false}}else{d.note.dialog(d.msg.S11);return false}}};uinv.FCM.configMgr.model.layer.globalLayerListHtml=function(b){var c=uinv.FCM.configMgr;var d=this;var a="";a=c.template.load("layer/globalLayerList.html",b);return a};uinv.FCM.configMgr.model.layer.globalLayerManager=function(){var d=uinv.FCM.configMgr;var e=this;var b="",c="";for(var a in e.obj){c+=e.globalPanelListHtml(e.obj[a])}b=d.template.load("layer/globalLayerManager.html",{globalLayerManagementBoxClass:e.globalLayerManagementBoxClass,list:c});d.model.dialog.show(b)};uinv.FCM.configMgr.model.layer.globalLayerManagerCallBack=function(){var a=uinv.FCM.configMgr;var b=this;a.model.stringDB.set(b.index,b.obj)};uinv.FCM.configMgr.model.layer.deleteGlobalLayer=function(b,a){var c=uinv.FCM.configMgr;var d=this;if(typeof d.obj[a]!="undefined"){delete d.obj[a]}$(b).parents("li").remove()};uinv.FCM.configMgr.model.layer.init=function(d){var e=uinv.FCM.configMgr;var f=this;e.form.submitCallback=function(){e.model.stringDB.set(f.index,f.obj,f.setDBCallback)};f.classStr=d||f.classStr;f.obj=f.getLayerList();var c="";for(var b=0,a=e.data.layer.length;b<a;b++){c+=f.mkhtml(e.data.layer[b])}e.form.box.find(f.classStr).html(c)};uinv.FCM.configMgr.model.layer.itemConfigInitData.string=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));if(typeof c.itemData[$(a).attr("path")][$(a).attr("name")]=="string"){$(a).val(c.itemData[$(a).attr("path")][$(a).attr("name")])}};uinv.FCM.configMgr.model.layer.itemConfigInitData.number=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));if(typeof c.itemData[$(a).attr("path")][$(a).attr("name")]=="number"){$(a).val(c.itemData[$(a).attr("path")][$(a).attr("name")])}};uinv.FCM.configMgr.model.layer.itemConfigInitData.bool=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));if(typeof c.itemData[$(a).attr("path")][$(a).attr("name")]=="boolean"){if(a.value=="1"&&c.itemData[$(a).attr("path")][$(a).attr("name")]){a.checked=true}else{if(a.value=="0"&&!c.itemData[$(a).attr("path")][$(a).attr("name")]){a.checked=true}}}};uinv.FCM.configMgr.model.layer.itemConfigInitData.color=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));if(typeof c.itemData[$(a).attr("path")][$(a).attr("name")]=="string"){$(a).val(c.itemData[$(a).attr("path")][$(a).attr("name")])}b.model.colorpicke.show(a)};uinv.FCM.configMgr.model.layer.itemConfigInitData.position3d=function(b){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.layer;var d=c.model.layer.keyFindObj($(b).attr("objectkey"));if(typeof d.itemData[$(b).attr("path")][$(b).attr("name")]=="object"){var a=$(b).parents("li").index();$(b).val(d.itemData[$(b).attr("path")][$(b).attr("name")][a])}};uinv.FCM.configMgr.model.layer.itemConfigInitData.position2d=function(b){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.layer;var d=c.model.layer.keyFindObj($(b).attr("objectkey"));if(typeof d.itemData[$(b).attr("path")][$(b).attr("name")]=="object"){var a=$(b).parents("li").index();$(b).val(d.itemData[$(b).attr("path")][$(b).attr("name")][a])}};uinv.FCM.configMgr.model.layer.itemConfigInitData.select=function(b){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.layer;var d=c.model.layer.keyFindObj($(b).attr("objectkey"));if(typeof d.itemData[$(b).attr("path")][$(b).attr("name")]!="undefined"){var a=d.itemData[$(b).attr("path")][$(b).attr("name")];$(b).find("option").each(function(){if($(this).attr("value")==a){this.selected=true}else{if(this.selected){this.selected=false}}})}};uinv.FCM.configMgr.model.layer.itemConfigSetData.string=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));c.itemData[$(a).attr("path")][$(a).attr("name")]=$(a).val()};uinv.FCM.configMgr.model.layer.itemConfigSetData.number=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));c.itemData[$(a).attr("path")][$(a).attr("name")]=Number($(a).val())};uinv.FCM.configMgr.model.layer.itemConfigSetData.bool=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));if(a.checked){if(a.value=="1"){c.itemData[$(a).attr("path")][$(a).attr("name")]=true}else{c.itemData[$(a).attr("path")][$(a).attr("name")]=false}}};uinv.FCM.configMgr.model.layer.itemConfigSetData.color=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));c.itemData[$(a).attr("path")][$(a).attr("name")]=$(a).val()};uinv.FCM.configMgr.model.layer.itemConfigSetData.position3d=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));if(typeof c.itemData[$(a).attr("path")][$(a).attr("name")]=="undefined"||c.itemData[$(a).attr("path")][$(a).attr("name")].length==3){c.itemData[$(a).attr("path")][$(a).attr("name")]=[]}c.itemData[$(a).attr("path")][$(a).attr("name")].push($(a).val())};uinv.FCM.configMgr.model.layer.itemConfigSetData.position2d=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));if(typeof c.itemData[$(a).attr("path")][$(a).attr("name")]=="undefined"||c.itemData[$(a).attr("path")][$(a).attr("name")].length==2){c.itemData[$(a).attr("path")][$(a).attr("name")]=[]}c.itemData[$(a).attr("path")][$(a).attr("name")].push($(a).val())};uinv.FCM.configMgr.model.layer.itemConfigSetData.select=function(a){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.layer;var c=b.model.layer.keyFindObj($(a).attr("objectkey"));$(a).find("option").each(function(){if(this.selected){c.itemData[$(a).attr("path")][$(a).attr("name")]=$(this).attr("value")}})};uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml.string=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.layer;var e=typeof f.defaultItem=="undefined"?"":f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("layer/typeInputText.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,cate:"string"});return b};uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml.number=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.layer;var e=typeof f.defaultItem=="undefined"?"":f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("layer/typeInputText.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,cate:"number"});return b};uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml.bool=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.layer;var e=typeof f.defaultItem=="undefined"?false:f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("layer/typeBool.html",{key:d,isTrue:e,caption:a,name:f.name,objectKey:c,itemsTrueCaption:f.items.TRUE,itemsFalseCaption:f.items.FALSE});return b};uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml.color=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.layer;var e=typeof f.defaultItem=="undefined"?"#FFFFFF":f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("layer/typeInputText.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,cate:"color"});return b};uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml.position3d=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.layer;var e=typeof f.defaultItem=="undefined"?[0,0,0]:f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("layer/position3d.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,itemsCaption:f.items});return b};uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml.position2d=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.layer;var e=typeof f.defaultItem=="undefined"?[0,0]:f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("layer/position2d.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,itemsCaption:f.items});return b};uinv.FCM.configMgr.model.layer.itemConfigTypeToHtml.select=function(d,j,n){var f=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.layer;var l=typeof d.caption=="undefined"?d.name:d.caption,h=typeof d.defaultItem=="undefined"?"":d.defaultItem,g=[],a=null;for(var c=0,b=d.items.length;c<b;c++){if(typeof d.itemsCaption=="object"&&typeof d.itemsCaption[c]!=="undefined"){tmpCaption=d.itemsCaption[c]}else{tmpCaption=d.items[c]}g.push({caption:tmpCaption,value:d.items[c]})}html=f.template.load("layer/typeSelect.html",{key:j,value:h,caption:l,name:d.name,objectKey:n,items:g});return html};uinv.FCM.configMgr.model.monitor.conditionArr=["<"];uinv.FCM.configMgr.model.monitor.deleteFileArr=[];uinv.FCM.configMgr.model.monitor.obj=null;uinv.FCM.configMgr.model.monitor.objBoxClassStr="";uinv.FCM.configMgr.model.monitor.styleBoxClassStr="";uinv.FCM.configMgr.model.monitor.alarmlevelBoxClassStr="";uinv.FCM.configMgr.model.monitor.index="monitor";uinv.FCM.configMgr.model.monitor.position={x:[{name:"左",value:"LEFT"},{name:"中",value:"CENTER"},{name:"右",value:"RIGHT"}],y:[{name:"上",value:"TOP"},{name:"中",value:"CENTER"},{name:"下",value:"BOTTOM"}],z:[{name:"前",value:"FRONT"},{name:"中",value:"CENTER"},{name:"后",value:"BACK"}]};uinv.FCM.configMgr.model.monitor.panelConfigAttributeField=[{name:"指标名称",value:"attributeName",type:"string"},{name:"单位",value:"unit",type:"string"},{name:"指标取值",value:"propertyPath",type:"string"},{name:"最小值",value:"min",type:"number"},{name:"最大值",value:"max",type:"number"},{name:"进度条",value:"isProgressBar",type:"bool"},{name:"颜色设置",value:"styleConfig",type:"styleConfig"}];uinv.FCM.configMgr.model.monitor.getSelectOptionHtml=function(a,e){var f=uinv.FCM.configMgr;var g=this;var d="";for(var c=0,b=g.position[a].length;c<b;c++){if(e==g.position[a][c].value){d+=f.template.load("option_selected",{caption:g.position[a][c].name,value:g.position[a][c].value})}else{d+=f.template.load("option",{caption:g.position[a][c].name,value:g.position[a][c].value})}}return d};uinv.FCM.configMgr.model.monitor.configShow=function(r){var p=uinv.FCM.configMgr,l=this,f=null,g=null,s="",j="",q="",n="",b="",h=null,c=l.keyFindObj(r),d=null,e=0,a=null;a=l.nameFindPanel(c.panel);if(!a){return false}s=p.global.projectPath+l.getPanelImagePath(a);h=typeof c.config.pivotLayout=="undefined"?a.pivotLayout:c.config.pivotLayout;for(f=0,g=["x","y","z"];f<g.length;f++){n+=p.template.load("monitor/position.html",{position:h[f],items:l.position[g[f]],name:"pivotLayout"})}h=typeof c.config.layout=="undefined"?a.layout:c.config.layout;for(f=0,g=["x","y","z"];f<g.length;f++){q+=p.template.load("monitor/position.html",{position:h[f],items:l.position[g[f]],name:"layout"})}d=typeof c.config.layoutOffset=="undefined"?a.layoutOffset:c.config.layoutOffset;e=typeof c.config.canvasScale=="undefined"?a.canvasScale:c.config.canvasScale;b=l.panelConfigFormHtml(a,c);j=p.template.load("monitor/configMain.html",{layoutOffset:d,layoutSelectHtml:q,pivotLayoutSelectHtml:n,canvasScale:e,form:b,key:r,imgSrc:s,panel:c.panel});p.model.dialog.show(j);p.model.dialog.getObj().find(".monitor_set").find("select[name=pivotLayout]:last").hide();p.model.dialog.getObj().find(".color-config").find("input[name=config]").each(function(){p.model.colorpicke.show(this)})};uinv.FCM.configMgr.model.monitor.configHide=function(a,b){var c=uinv.FCM.configMgr;var d=this;c.model.dialog.getObj().find(".each").each(function(){if(typeof d.configSetData[$(this).attr("cate")]=="function"){d.configSetData[$(this).attr("cate")](this,d.keyFindObj(b))}});d.synchronousFormData(b);c.model.dialog.close();c.form.saveData()};uinv.FCM.configMgr.model.monitor.synchronousFormData=function(d){var f=uinv.FCM.configMgr;var h=this;var e=h.keyFindObj(d);for(var c=0,b=h.obj.panel.length;c<b;c++){for(var g in h.obj.panel[c].modify){for(var a in h.obj.panel[c].modify[g]){if(typeof e.form[h.obj.panel[c].modify[g][a].row]=="undefined"){continue}h.obj.panel[c].showMapping[g][a]=e.form[h.obj.panel[c].modify[g][a].row][h.obj.panel[c].modify[g][a].attribute]}}}};uinv.FCM.configMgr.model.monitor.panelConfigFormHtml=function(a,b){var l=uinv.FCM.configMgr,h=this,c=0,f=0,p="",j="",e="",g="";for(c=0;c<a.modifyCount;c++){j="";for(f=0,k=h.panelConfigAttributeField.length;f<k;f++){j+=l.template.load("monitor/td.html",{contents:h.configTypeToHtml[h.panelConfigAttributeField[f].type](h.panelConfigAttributeField[f],b.form[c])})}p+=l.template.load("monitor/panelConfigFormTr.html",{panelConfigFormTypeDom:j})}for(c=0;c<a.modifyCount;c++){var d=[];if(typeof b.form[c]=="object"&&typeof b.form[c].styleConfig=="object"){d=b.form[c].styleConfig}e+=h.styleConfigHtml(d)}g+=l.template.load("monitor/panelConfigForm.html",{field:h.panelConfigAttributeField,panelConfigFormRow:p,colorConfigContents:e});return g};uinv.FCM.configMgr.model.monitor.styleConfigHtmlRow=function(b){var c=uinv.FCM.configMgr;var d=this;var a="";if(typeof b=="undefined"){b={condition:d.conditionArr[0],number:0,config:"#FFFFFF"}}a=c.template.load("monitor/styleConfigRows.html",{conditionArr:d.conditionArr,condition:b.condition,number:b.number,config:b.config});return a};uinv.FCM.configMgr.model.monitor.deleteStyleConfigRow=function(a){$(a).parents("tr:eq(0)").remove()};uinv.FCM.configMgr.model.monitor.addStyleConfigHtmlRow=function(e){var d=uinv.FCM.configMgr;var f=this;var b=f.styleConfigHtmlRow({condition:f.conditionArr[0],number:0,config:"#FFFFFF"});var a=$(e).parents(".row").find("table");a.append(b);var c=a.find(".one:last").find("input[name=config]").get(0);d.model.colorpicke.show(c)};uinv.FCM.configMgr.model.monitor.styleConfigHtml=function(e){var f=uinv.FCM.configMgr;var g=this;var d="",b="";for(var c=0,a=e.length;c<a;c++){b+=g.styleConfigHtmlRow(e[c])}d=f.template.load("monitor/styleConfigMain.html",{styleConfigRows:b});return d};uinv.FCM.configMgr.model.monitor.settingStyleConfigDisplay=function(b){var c=uinv.FCM.configMgr;var d=this;var a=$(b).parents("tr.row").index()-1;c.model.dialog.getObj().find(".color-config").find(".row").each(function(e){if(e==a){$(this).show()}else{$(this).hide()}})};uinv.FCM.configMgr.model.monitor.uploadPanel=function(b){var c=uinv.FCM.configMgr;var e=this;var a=b.value.split("\\");var d=a.pop();uinv.server.manager.frame.upAndUnZip(b,d,function(f){if(f.success){f.data=c.model.string.varFixSub(f.data);var j=c.model.transform.str2obj(f.data);if(c.model.array.isArray(j)){for(var h=0,g=j.length;h<g;h++){e.uploadPanelHandle(j[h],d)}}else{e.uploadPanelHandle(j,d)}}else{c.note.alert(f.data)}})};uinv.FCM.configMgr.model.monitor.uploadPanelHandle=function(f,h){var e=uinv.FCM.configMgr;var g=this;var b=0;f.imagePath=f.previewImagePath;if(!g.checkModifyBody(f)){return false}var a=true;var d=g.nameFindPanel(f.name);if(d){a=e.note.confirm(e.msg.F7(f.name))}if(d&&d.modifyCount>f.modifyCount&&typeof d.form!="undefined"&&d.form.length==d.modifyCount){a=e.note.confirm(e.msg.F10(d.modifyCount-f.modifyCount));if(a){d.form.splice(f.modifyCount,d.modifyCount-f.modifyCount)}}if(a){f=g.addPanelToMemory(f);uinv.server.manager.frame.cutGeneralFile(f.downloadFile,g.getPanelZipPath(f));uinv.server.manager.frame.cutGeneralFile(f.imagePath,g.getPanelImagePath(f));e.model.download.set({url:g.getPanelZipPath(f),local:g.pathToDir(f.image)});g.objHtml();g.styleHtml();e.form.saveData();var c=g.getPanelPath(f);for(b=0;b<g.deleteFileArr.length;b++){if(g.deleteFileArr[b]==c){g.deleteFileArr.splice(b,1);b=0}}}};uinv.FCM.configMgr.model.monitor.pathToDir=function(c){var d=uinv.FCM.configMgr,e=this,b="",a=[];if(c.indexOf("/")>=0){a=c.split("/");a.pop();b=a.join("/")}if(c.indexOf("\\")>=0){a=c.split("\\");a.pop();b=a.join("\\")}return b};uinv.FCM.configMgr.model.monitor.getPanelPath=function(b){var a=uinv.FCM.configMgr;var c=this;return a.global.path+"/Monitor/"+b.name};uinv.FCM.configMgr.model.monitor.getPanelImagePath=function(b){var a=uinv.FCM.configMgr;var c=this;return a.global.path+"/Monitor/"+b.name+"/"+b.imagePath};uinv.FCM.configMgr.model.monitor.getPanelZipPath=function(b){var a=uinv.FCM.configMgr;var c=this;return a.global.path+"/Monitor/"+b.name+"/download.zip"};uinv.FCM.configMgr.model.monitor.addPanelToMemory=function(b){var d=uinv.FCM.configMgr;var e=this;if(e.nameFindPanel(b.name)){var c=e.nameFindPanel(b.name);var a=e.nameFindPanelIndex(b.name);e.obj.panel.splice(a,1,b)}else{e.obj.panel.push(b)}return b};uinv.FCM.configMgr.model.monitor.isUsePanel=function(b){var d=uinv.FCM.configMgr;var e=this;for(var c=0,a=d.data.monitor.object.length;c<a;c++){if(d.data.monitor.object[c].panel==b){return true}}return false};uinv.FCM.configMgr.model.monitor.checkModifyBody=function(a){var h=uinv.FCM.configMgr;var g=this;var b=[],l=false,f,e,d,c=false;if(typeof a=="undefined"){return false}b.push(h.msg.S28);for(f in a.modify){for(e in a.modify[f]){c=false;for(d in g.panelConfigAttributeField){if(g.panelConfigAttributeField[d].value==a.modify[f][e].attribute){c=true}}if(!c){l=true;b.push(h.msg.F8(f,e,a.modify[f][e].attribute))}if(a.modify[f][e].row>=a.modifyCount){b.push(h.msg.F9(f,e,a.modify[f][e].row))}}}if(l){h.note.alert(b.join("\n\r"));return false}else{return true}};uinv.FCM.configMgr.model.monitor.deletePanel=function(c){var e=uinv.FCM.configMgr;var f=this;var a=f.isUsePanel(c);if(a){e.note.alert(e.msg.S27);return false}var d=f.nameFindPanel(c);e.model.download.del(f.getPanelZipPath(d));f.deleteFileArr.push(f.getPanelPath(d));var b=f.nameFindPanelIndex(c);if(b>=0){f.obj.panel.splice(b,1);f.objHtml();f.styleHtml()}};uinv.FCM.configMgr.model.monitor.deleteObject=function(b){var c=uinv.FCM.configMgr;var d=this;var a=d.keyFindObjIndex(b);c.data.monitor.object.splice(a,1);d.objHtml()};uinv.FCM.configMgr.model.monitor.createObject=function(){var a=uinv.FCM.configMgr;var b=this;a.model.selector.show(function(c){a.model.selector.hide();var d=b.addObjectToMemory(c);b.addHtmlRow(d)})};uinv.FCM.configMgr.model.monitor.addObjectToMemory=function(b){var c=uinv.FCM.configMgr;var d=this;var a="";do{a=c.model.key.create(10)}while(d.keyFindObj(a));b.key=a;b.form=[];b.config={};c.data.monitor.object.push(b);return b};uinv.FCM.configMgr.model.monitor.keyFindObjIndex=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.monitor.object.length;b<a;b++){if(d.data.monitor.object[b].key==c){return b}}return -1};uinv.FCM.configMgr.model.monitor.keyFindObj=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.monitor.object.length;b<a;b++){if(d.data.monitor.object[b].key==c){return d.data.monitor.object[b]}}return false};uinv.FCM.configMgr.model.monitor.nameFindPanelIndex=function(b){var d=uinv.FCM.configMgr;var e=this;for(var c=0,a=e.obj.panel.length;c<a;c++){if(e.obj.panel[c].name==b){return c}}return -1};uinv.FCM.configMgr.model.monitor.nameFindPanel=function(b){var d=uinv.FCM.configMgr;var e=this;if(typeof e.obj.panel=="undefined"){e.obj.panel=[]}for(var c=0,a=e.obj.panel.length;c<a;c++){if(e.obj.panel[c].name==b){return e.obj.panel[c]}}return false};uinv.FCM.configMgr.model.monitor.objSelectPanel=function(d,c){var e=uinv.FCM.configMgr;var f=this;var b=true,a=f.keyFindObj(c).panel;if(a&&f.nameFindPanel(f.keyFindObj(c).panel).modifyCount!=f.nameFindPanel(d.value).modifyCount){b=e.note.confirm(e.msg.F6(a));if(b){f.keyFindObj(c).form={}}}if(b){f.keyFindObj(c).panel=d.value}else{a=f.keyFindObj(c).panel;$(d).find("option").each(function(){if($(this).val()==a){this.selected=true}else{this.selected=false}})}};uinv.FCM.configMgr.model.monitor.addHtmlRow=function(b){var c=uinv.FCM.configMgr;var d=this;var a=d.objHtmlRow(b);c.form.box.find(d.objBoxClassStr).append(a);c.translate()};uinv.FCM.configMgr.model.monitor.objHtmlRow=function(b){var c=uinv.FCM.configMgr;var d=this;var a="";a=c.template.load("monitor/objMain.html",{panelArr:d.obj.panel,name:b.name,panel:b.panel,key:b.key});return a};uinv.FCM.configMgr.model.monitor.objHtml=function(){var d=uinv.FCM.configMgr;var e=this;var c="";for(var b=0,a=d.data.monitor.object.length;b<a;b++){c+=e.objHtmlRow(d.data.monitor.object[b])}d.form.box.find(e.objBoxClassStr).find("tr:gt(0)").remove();d.form.box.find(e.objBoxClassStr).append(c);d.translate()};uinv.FCM.configMgr.model.monitor.objectRename=function(e,b){var f=uinv.FCM.configMgr;var g=this;var d=$(e).html(),c=$(e).parent(),a=c.html();c.html(f.template.load("input_text.html",{value:d}));c.find("input").focus().blur(function(){var h=$(this).val();c.html(a).find("a").html(h);g.keyFindObj(b).name=h}).keydown(function(h){var l=h||window.event;if(l.keyCode==13){var j=$(this).val();c.html(a).find("a").html(j);g.keyFindObj(b).name=j}})};uinv.FCM.configMgr.model.monitor.styleHtmlRow=function(b){var c=uinv.FCM.configMgr;var d=this;var a="";a=c.template.load("monitor/panelTr.html",b);return a};uinv.FCM.configMgr.model.monitor.styleHtml=function(){var d=uinv.FCM.configMgr;var e=this;var c="";for(var b=0,a=e.obj.panel.length;b<a;b++){c+=e.styleHtmlRow(e.obj.panel[b])}d.form.box.find(e.styleBoxClassStr).find("tr:gt(0)").remove();d.form.box.find(e.styleBoxClassStr).append(c);d.translate()};uinv.FCM.configMgr.model.monitor.alarmLevelHtml=function(){var d=uinv.FCM.configMgr;var e=this;var c="";if(typeof d.data.monitor.alarm.alarmLevel=="object"){for(var b=0,a=d.data.monitor.alarm.alarmLevel.length;b<a;b++){c+=e.alarmLevelHtmlRow(d.data.monitor.alarm.alarmLevel[b])}}d.form.box.find(e.alarmlevelBoxClassStr).find("tr:gt(0)").remove();d.form.box.find(e.alarmlevelBoxClassStr).append(c)};uinv.FCM.configMgr.model.monitor.alarmLevelHtmlRow=function(c){var b=uinv.FCM.configMgr;var d=this;var a="";a=b.template.load("monitor/alarmLevelTr.html",c);return a};uinv.FCM.configMgr.model.monitor.deleteAlarmLevelRow=function(a){var b=uinv.FCM.configMgr;var c=this;$(a).parents(".row:eq(0)").remove()};uinv.FCM.configMgr.model.monitor.addAlarmLevel=function(){var d=uinv.FCM.configMgr;var e=this;var c={name:"",color:"#FFF"};var a=e.alarmLevelHtmlRow(c);d.form.box.find(e.alarmlevelBoxClassStr).append(a);var b=d.form.box.find(e.alarmlevelBoxClassStr).find(".row:last").find("input[name=color]").get(0);d.model.colorpicke.show(b)};uinv.FCM.configMgr.model.monitor.init=function(b){var a=uinv.FCM.configMgr;var c=this;a.form.submitCallback=function(){a.model.stringDB.set(c.index,c.obj);for(var e=0,d=c.deleteFileArr.length;e<d;e++){uinv.server.manager.frame.delFile(c.deleteFileArr[e])}};c.objBoxClassStr=b.objBox||"";c.styleBoxClassStr=b.styleBox||"";c.alarmlevelBoxClassStr=b.alarmlevelBox||"";c.obj=a.model.stringDB.get(c.index);c.obj.panel=typeof c.obj.panel=="undefined"?[]:c.obj.panel;c.objHtml();c.styleHtml();c.alarmLevelHtml()};uinv.FCM.configMgr.model.monitor.configSetData.array=function(b,d){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.monitor;var a=$(b).attr("key");d.config[a]=[];$(b).find("*[name="+a+"]").each(function(){d.config[a].push($(this).val())})};uinv.FCM.configMgr.model.monitor.configSetData.number=function(b,d){var c=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.monitor;var a=$(b).attr("key");d.config[a]=Number($(b).find("*[name="+a+"]").val())};uinv.FCM.configMgr.model.monitor.configSetData.form=function(a,c){var b=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.monitor;c.form=[];$(a).find("tr.row").each(function(e){c.form[e]={};$(this).find("*[name][cate]").each(function(){d.configTypeToData[$(this).attr("cate")](this,c.form[e])})})};uinv.FCM.configMgr.model.monitor.configStyleTypeToData.number=function(a){return Number(a)};uinv.FCM.configMgr.model.monitor.configStyleTypeToData.string=function(a){return a};uinv.FCM.configMgr.model.monitor.configStyleTypeToData.color=function(a){var b=uinv.FCM.configMgr;var c=b.model.monitor;return a};uinv.FCM.configMgr.model.monitor.configTypeToData.string=function(b,a){a[$(b).attr("name")]=$(b).val()};uinv.FCM.configMgr.model.monitor.configTypeToData.number=function(b,a){a[$(b).attr("name")]=Number($(b).val())};uinv.FCM.configMgr.model.monitor.configTypeToData.bool=function(b,a){if($(b).val()=="1"){a[$(b).attr("name")]=true}else{a[$(b).attr("name")]=false}};uinv.FCM.configMgr.model.monitor.configTypeToData.styleConfig=function(e,c){var d=uinv.FCM.configMgr;var f=d.model.monitor;var b=$(e).attr("name");c[b]=[];var a=$(e).parents("tr.row").index()-1;d.model.dialog.getObj().find(".color-config").find(".row:eq("+a+")").find("table").find("tr.one").each(function(){var g={};$(this).find("*[name]").each(function(){g[$(this).attr("name")]=f.configStyleTypeToData[$(this).attr("cate")](this.value)});c[b].push(g)})};uinv.FCM.configMgr.model.monitor.configTypeToHtml.string=function(c,a){var b=uinv.FCM.configMgr;var d=b.model.monitor;if(typeof a=="undefined"){a={};a[c.value]=""}return b.template.load("monitor/configTypeInputText.html",{name:c.value,value:a[c.value],cate:"string"})};uinv.FCM.configMgr.model.monitor.configTypeToHtml.number=function(c,a){var b=uinv.FCM.configMgr;var d=b.model.monitor;if(typeof a=="undefined"){a={};a[c.value]=0}return b.template.load("monitor/configTypeInputText.html",{name:c.value,value:a[c.value],cate:"number"})};uinv.FCM.configMgr.model.monitor.configTypeToHtml.bool=function(c,a){var b=uinv.FCM.configMgr;var d=b.model.monitor;if(typeof a=="undefined"){a={};a[c.value]=false}return b.template.load("monitor/configTypeBool.html",{name:c.value,value:a[c.value],cate:"bool"})};uinv.FCM.configMgr.model.monitor.configTypeToHtml.styleConfig=function(c,a){var b=uinv.FCM.configMgr;var d=b.model.monitor;if(typeof a=="undefined"){a={}}if(typeof a[c.value]=="undefined"){a[c.value]=[]}d.styleConfigHtml(a[c.value]);return b.template.load("monitor/configTypeStyleConfig.html",{name:c.value,cate:"styleConfig"})};uinv.FCM.configMgr.model.object.o2o=function(d,c){var e=uinv.FCM.configMgr;var f=this;var b=null;if(typeof d!=typeof c){return false}if(typeof d.length!=typeof c.length){return false}var a=true;for(b in d){if(b in c){if(typeof d[b]=="object"){a=f.o2o(d[b],c[b])}else{if(d[b]!==c[b]){a=false}}}else{a=false}}for(b in c){if(b in d){if(typeof c[b]=="object"){a=f.o2o(c[b],d[b])}else{if(c[b]!==d[b]){a=false}}}else{a=false}}return a};uinv.FCM.configMgr.model.object.coverObj=function(b,c){var d=uinv.FCM.configMgr;var e=this;for(var a in b){if(typeof(c[a])=="undefined"){c[a]=b[a]}else{if(typeof b[a]=="object"){e.coverObj(b[a],c[a])}else{c[a]=b[a]}}}};uinv.FCM.configMgr.model.object.clone=function(d){var e=uinv.FCM.configMgr;var g=this;var f=null;if(null===d||"object"!=typeof d){return d}if(d instanceof Date){f=new Date();f.setTime(d.getTime());return f}if(d instanceof Array){f=[];for(var c=0,b=d.length;c<b;++c){f[c]=g.clone(d[c])}return f}if(d instanceof Object){f={};for(var a in d){if(d.hasOwnProperty(a)){f[a]=g.clone(d[a])}}return f}e.note.alert(e.msg.S12)};uinv.FCM.configMgr.model.object.isObject=function(b){var a=uinv.FCM.configMgr;var c=this;return b instanceof Object};uinv.FCM.configMgr.model.panel.globalPanelManagementBoxClass="panel-global";uinv.FCM.configMgr.model.panel.index="panel";uinv.FCM.configMgr.model.panel.uploadPanelSelector="";uinv.FCM.configMgr.model.panel.obj=null;uinv.FCM.configMgr.model.panel.upMoveBtnClass="upmove";uinv.FCM.configMgr.model.panel.classStr="";uinv.FCM.configMgr.model.panel.keyFindObj=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.panel.length;b<a;b++){if(c==d.data.panel[b].key){return d.data.panel[b]}}return{}};uinv.FCM.configMgr.model.panel.keyDelObj=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.panel.length;b<a;b++){if(c==d.data.panel[b].key){d.data.panel.splice(b,1);return true}}return false};uinv.FCM.configMgr.model.panel.createObject=function(){var a=uinv.FCM.configMgr;var b=this;a.model.selector.show(function(f){var c=b.checkObjectExist(f.where);if(c){a.note.alert(a.msg.S6);return false}a.model.selector.cancelAddNodeWhere();var e=b.addObject(f);var d=b.mkhtml(e);$(b.classStr).append(d)})};uinv.FCM.configMgr.model.panel.insertDividingLine=function(d,b){var f=uinv.FCM.configMgr;var g=this;if(!b){f.note.dialog(f.msg.S7);return false}var a=g.mkHtmlList({key:b},{name:u.le.get("分割线")});var c=$(d).parents(".list").find("ul");c.append(a);var e=c.find("li:last").find("*[name][cate][value]").get(0);e.checked=true;g.checkd(e);e.disabled=true};uinv.FCM.configMgr.model.panel.deleteObj=function(a){var b=uinv.FCM.configMgr;var c=this;c.keyDelObj(a);b.form.box.find(".obj-"+a).remove()};uinv.FCM.configMgr.model.panel.deleteObjPanel=function(b){var c=uinv.FCM.configMgr;var e=this;var d=$(b).parents("li").find("*[cate][name][value]").attr("value");if(d==u.le.get("分割线")){$(b).parents("li").remove()}else{com=c.note.confirm(c.msg.S8);if(!com){return false}for(var a in c.data.panel){e.keyDeleteObjPanelLi(c.data.panel[a].key,d);e.keyDeleteObjPanel(c.data.panel[a],d)}}};uinv.FCM.configMgr.model.panel.keyDeleteObjPanel=function(b,e){var c=uinv.FCM.configMgr;var d=this;var a=0;if(c.model.array.inArray(e,b.order)){a=c.model.array.strInArrayIndex(e,b.order);b.order.splice(a,1)}if(c.model.array.inArray(e,b.item)){a=c.model.array.strInArrayIndex(e,b.item);b.item.splice(a,1)}};uinv.FCM.configMgr.model.panel.keyDeleteObjPanelLi=function(a,b){var c=uinv.FCM.configMgr;var d=this;c.form.box.find(d.classStr).find(".obj-"+a).find("li").each(function(){if($(this).find("*[cate][name][value]").attr("value")==b){$(this).remove()}})};uinv.FCM.configMgr.model.panel.modifyObjectName=function(b,d){var e=uinv.FCM.configMgr;var f=this;var c=$(d).html();var a=$(d).parent();a.html(e.template.load("input_text.html",{value:c}));a.find("input").focus().blur(function(){f.keyFindObj(b).name=$(this).val();$(this).parent().html("<span onclick=\"uinv.FCM.configMgr.model.panel.modifyObjectName('"+b+"',this);\">"+$(this).val()+"</span>")}).keydown(function(g){var h=g||windown.event;if(h.keyCode==13){f.keyFindObj(b).name=$(this).val();$(this).parent().html("<span onclick=\"uinv.FCM.configMgr.model.panel.modifyObjectName('"+b+"',this);\">"+$(this).val()+"</span>")}})};uinv.FCM.configMgr.model.panel.mkhtml=function(d){var f=uinv.FCM.configMgr;var g=this;var c="",e="";for(var b=0,a=d.order.length;b<a;b++){if(d.order[b] in g.obj){e+=g.mkHtmlList(d,g.obj[d.order[b]])}else{e+=g.mkHtmlList(d,{name:d.order[b]})}}c=f.template.load("panel/panelListMain.html",{panelLis:e,key:d.key,name:d.name});return c};uinv.FCM.configMgr.model.panel.mkHtmlList=function(d,a){var e=uinv.FCM.configMgr;var g=this;var c=typeof a.__key=="string"?a.__key:a.name,f=a.name==u.le.get("分割线")?"撤销":"删除",b="";b=e.template.load("panel/panelListLi.html",{key:c,objKey:d.key,delbtnValue:f,panelName:a.name,upMoveBtnClass:g.upMoveBtnClass,isViewsEditBtn:typeof a.itemConfig==="object"});return b};uinv.FCM.configMgr.model.panel.itemConfig=function(e,d){var f=uinv.FCM.configMgr;var h=this;if(typeof h.obj[e].itemConfig=="undefined"){h.note.alert(f.msg.S9)}_panel=h.keyFindObj(d);_panel.itemData=typeof _panel.itemData=="undefined"?{}:_panel.itemData;_panel.itemData[e]=typeof _panel.itemData[e]=="undefined"?{}:_panel.itemData[e];var c="",g="";for(var b=0,a=h.obj[e].itemConfig.length;b<a;b++){if(typeof h.itemConfigTypeToHtml[h.obj[e].itemConfig[b].type]=="function"){g+=h.itemConfigTypeToHtml[h.obj[e].itemConfig[b].type](h.obj[e].itemConfig[b],e,d)}}c=f.template.load("panel/itemConfigMain.html",{itemConfigRows:g});f.model.dialog.show(c);h.itemConfigFormInit(d)};uinv.FCM.configMgr.model.panel.itemConfigFormInit=function(){var a=uinv.FCM.configMgr;var b=this;a.model.dialog.getObj().find(".itemConfig").find("*[name][cate][path]").each(function(){if(typeof b.itemConfigInitData[$(this).attr("cate")]=="function"){b.itemConfigInitData[$(this).attr("cate")](this)}})};uinv.FCM.configMgr.model.panel.itemConfigSubmit=function(){var a=uinv.FCM.configMgr;var b=this;a.model.dialog.getObj().find(".itemConfig").find("*[name][cate][path]").each(function(){if(typeof b.itemConfigSetData[$(this).attr("cate")]=="function"){b.itemConfigSetData[$(this).attr("cate")](this)}});a.model.dialog.close()};uinv.FCM.configMgr.model.panel.addPanelOneToObj=function(b,a){var c=uinv.FCM.configMgr;var d=this;c.form.box.find(".obj-"+b).find("ul").append(a)};uinv.FCM.configMgr.model.panel.removeObjPanelIsValue=function(a,b){var c=uinv.FCM.configMgr;var d=this;c.form.box.find(".obj-"+a).find('*[name="'+a+'"][value="'+b+'"]').parents("li").remove()};uinv.FCM.configMgr.model.panel.order=function(c){var d=uinv.FCM.configMgr;var e=this;var b=0;var a=0;d.form.box.find("*[name="+$(c).attr("name")+"]").each(function(f){if(this.checked===true&&this!=c){b++}else{if(this==c){a=f}}});if(a!=b){if(c.checked===true){d.form.box.find("*[name="+$(c).attr("name")+"]:eq("+b+")").parents("li").before($(c).parents("li"))}else{d.form.box.find("*[name="+$(c).attr("name")+"]:eq("+b+")").parents("li").after($(c).parents("li"))}}};uinv.FCM.configMgr.model.panel.showUpMoveBtn=function(a){var b=uinv.FCM.configMgr;var c=this;$(a).parents("li").find("."+c.upMoveBtnClass).show()};uinv.FCM.configMgr.model.panel.hideUpMoveBtn=function(a){var b=uinv.FCM.configMgr;var c=this;$(a).parents("li").find("."+c.upMoveBtnClass).hide()};uinv.FCM.configMgr.model.panel.checkd=function(a){var b=uinv.FCM.configMgr;var c=this;c.order(a);if(a.checked===true){$(a).parents("li").addClass("checked");c.showUpMoveBtn(a)}else{$(a).parents("li").removeClass("checked");c.hideUpMoveBtn(a)}};uinv.FCM.configMgr.model.panel.checkedPanelOrder=function(a){var g=uinv.FCM.configMgr;var f=this;var h=f.keyFindObj(a);var j=g.form.box.find("*[name="+a+"]:checked");if(h.item.length==j.length){for(var d=0,b=h.item.length;d<b;d++){var c=g.form.box.find("*[name="+a+'][value="'+h.item[d]+'"]');var e=c.parents("li").index();if(d!=e){g.form.box.find("*[name="+a+"]:eq("+d+")").parents("li").before(c.parents("li"))}}}};uinv.FCM.configMgr.model.panel.upMove=function(d){var e=uinv.FCM.configMgr;var f=this;var c=$(d).parents("li").find("input[type=checkbox][name]");if(c.get(0).checked===false){return}var b=$(d).parents("li").index();if(b===0){return}b--;var a=c.attr("name");e.form.box.find("*[name="+a+"]:eq("+b+")").parents("li").before($(d).parents("li"))};uinv.FCM.configMgr.model.panel.checkHasKey=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.panel.length;b<a;b++){if(d.data.panel[b].key==c){return true}}return false};uinv.FCM.configMgr.model.panel.addObject=function(e){var f=uinv.FCM.configMgr;var g=this;var d="";var a=false;do{d=f.model.key.create(32);a=g.checkHasKey(d)}while(a);var c={key:d,name:e.name,obj:e.where,itemConfig:{},order:[],item:[]};for(var b in g.obj){c.order.push(b)}f.data.panel.push(c);return c};uinv.FCM.configMgr.model.panel.judgeObjectIsEq=function(c,b){var d=uinv.FCM.configMgr;var e=this;var a=false;if(typeof c.classid!="undefined"&&typeof b.classid!="undefined"&&c.classid==b.classid){a=true}if(typeof c.name!="undefined"&&typeof b.name!="undefined"&&c.name==b.name){a=true}if(typeof c.attribute!="undefined"&&typeof b.attribute!="undefined"&&c.attribute[0].key==b.attribute[0].key&&c.attribute[0].value==b.attribute[0].value){a=true}return a};uinv.FCM.configMgr.model.panel.checkObjectExist=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.panel.length;b<a;b++){if(e.judgeObjectIsEq(c,d.data.panel[b].obj)){return true}}return false};uinv.FCM.configMgr.model.panel.add=function(b,a){var c=uinv.FCM.configMgr;var d=this;if(typeof d.uploadPanelSelector=="undefined"){d.addPanelToGlobalLib(b,d.addPanelToGlobalLibCallback)}else{d.addPanelToObjLib(b,d.addPanelToObjLibCallback)}};uinv.FCM.configMgr.model.panel.addPanelToGlobalLib=function(d,a){var e=uinv.FCM.configMgr;var f=this;var c=typeof d.__key=="string"?d.__key:d.name;f.obj[c]={};for(var b in d){f.obj[c][b]=d[b]}if(typeof a=="function"){a.apply(f,[d])}};uinv.FCM.configMgr.model.panel.addPanelToGlobalLibCallback=function(e){var f=uinv.FCM.configMgr;var g=this;g.obj[e.name]=f.model.object.clone(e);for(var d=0,a=f.data.panel.length;d<a;d++){var c=f.data.panel[d].key;var b=g.mkHtmlList({key:c},e);g.removeObjPanelIsValue(c,e.name);g.addPanelOneToObj(c,b)}};uinv.FCM.configMgr.model.panel.setDBCallback=function(){var a=uinv.FCM.configMgr;var b=this};uinv.FCM.configMgr.model.panel.addPanelToObjLib=function(e,a){var f=uinv.FCM.configMgr;var g=this;var d=e.name;if(typeof e.__key=="string"){d=e.__key}var b=g.keyFindObj(g.uploadPanelSelector);b.lib[d]={};b.order.push(d);for(var c in e){b.lib[d][c]=e[c]}if(typeof a=="function"){a(b,e)}};uinv.FCM.configMgr.model.panel.addPanelToObjLibCallback=function(e,a){var f=uinv.FCM.configMgr;var g=this;var d=true;var c=typeof a.__key=="string"?a.__key:a.name;var b=g.mkHtmlList(e,a);g.removeObjPanelIsValue(e.key,c);g.addPanelOneToObj(e.key,b)};uinv.FCM.configMgr.model.panel.getPanelList=function(){var a=uinv.FCM.configMgr;var b=this;return a.model.stringDB.get(b.index)};uinv.FCM.configMgr.model.panel.upload=function(e,a){var f=uinv.FCM.configMgr;var g=this;if(a){var d=g.keyFindObj(a);if(typeof d.lib=="undefined"){f.note.alert(f.msg.s10);return}}g.uploadPanelSelector=a;var c=$(e).val().split("\\");var b=c[c.length-1];uinv.server.manager.frame.upAndUnZip(e,b,function(h){g.uploadCallback(h)})};uinv.FCM.configMgr.model.panel.uploadCallback=function(a){var f=uinv.FCM.configMgr;var g=this;if(a.success){a.data=f.model.string.varFixSub(a.data);var e=f.model.transform.str2obj(a.data);var c=g.verificationPanelData(e);if(c){if(f.model.array.isArray(e)){for(var d=0,b=e.length;d<b;d++){g.add(e[d],g.addCallback)}}else{g.add(e,g.addCallback)}}f.form.submit()}else{f.note.alert(a.data)}};uinv.FCM.configMgr.model.panel.verificationPanelData=function(c){var d=uinv.FCM.configMgr;var e=this;if(d.model.array.isArray(c)){for(var b=0,a=c.length;b<a;b++){if(!d.model.object.isObject(c[b])||typeof c[b].name=="undefined"){d.note.dialog(d.msg.S11);return false}}return true}else{if(d.model.object.isObject(c)){if(typeof c.name!="undefined"){return true}else{d.note.dialog(d.msg.S11);return false}}else{d.note.dialog(d.msg.S11);return false}}};uinv.FCM.configMgr.model.panel.globalPanelListHtml=function(b){var c=uinv.FCM.configMgr;var d=this;var a="";a=c.template.load("panel/globalPanelList.html",b);return a};uinv.FCM.configMgr.model.panel.globalPanelManager=function(){var d=uinv.FCM.configMgr;var e=this;var b="",c="";for(var a in e.obj){c+=e.globalPanelListHtml(e.obj[a])}b=d.template.load("panel/globalPanelManager.html",{globalPanelManagementBoxClass:e.globalPanelManagementBoxClass,list:c});d.model.dialog.show(b)};uinv.FCM.configMgr.model.panel.globalPanelManagerCallBack=function(){var a=uinv.FCM.configMgr;var b=this;a.model.stringDB.set(b.index,b.obj)};uinv.FCM.configMgr.model.panel.deleteGlobalPanel=function(b,a){var c=uinv.FCM.configMgr;var d=this;if(typeof d.obj[a]!="undefined"){delete d.obj[a]}$(b).parents("li").remove()};uinv.FCM.configMgr.model.panel.init=function(d){var e=uinv.FCM.configMgr;var f=this;e.form.submitCallback=function(){e.model.stringDB.set(f.index,f.obj,f.setDBCallback)};f.classStr=d||f.classStr;f.obj=f.getPanelList();var c="";for(var b=0,a=e.data.panel.length;b<a;b++){c+=f.mkhtml(e.data.panel[b])}e.form.box.find(f.classStr).html(c)};uinv.FCM.configMgr.model.panel.itemConfigInitData.string=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));if(typeof a.itemData[$(b).attr("path")][$(b).attr("name")]=="string"){$(b).val(a.itemData[$(b).attr("path")][$(b).attr("name")])}};uinv.FCM.configMgr.model.panel.itemConfigInitData.number=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));if(typeof a.itemData[$(b).attr("path")][$(b).attr("name")]=="number"){$(b).val(a.itemData[$(b).attr("path")][$(b).attr("name")])}};uinv.FCM.configMgr.model.panel.itemConfigInitData.bool=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));if(typeof a.itemData[$(b).attr("path")][$(b).attr("name")]=="boolean"){if(b.value=="1"&&a.itemData[$(b).attr("path")][$(b).attr("name")]){b.checked=true}else{if(b.value=="0"&&!a.itemData[$(b).attr("path")][$(b).attr("name")]){b.checked=true}}}};uinv.FCM.configMgr.model.panel.itemConfigInitData.color=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));if(typeof a.itemData[$(b).attr("path")][$(b).attr("name")]=="string"){$(b).val(a.itemData[$(b).attr("path")][$(b).attr("name")])}c.model.colorpicke.show(b)};uinv.FCM.configMgr.model.panel.itemConfigInitData.position3d=function(c){var d=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.panel;var b=d.model.panel.keyFindObj($(c).attr("objectkey"));if(typeof b.itemData[$(c).attr("path")][$(c).attr("name")]=="object"){var a=$(c).parents("li").index();$(c).val(b.itemData[$(c).attr("path")][$(c).attr("name")][a])}};uinv.FCM.configMgr.model.panel.itemConfigInitData.position2d=function(c){var d=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.panel;var b=d.model.panel.keyFindObj($(c).attr("objectkey"));if(typeof b.itemData[$(c).attr("path")][$(c).attr("name")]=="object"){var a=$(c).parents("li").index();$(c).val(b.itemData[$(c).attr("path")][$(c).attr("name")][a])}};uinv.FCM.configMgr.model.panel.itemConfigInitData.select=function(c){var d=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.panel;var b=d.model.panel.keyFindObj($(c).attr("objectkey"));if(typeof b.itemData[$(c).attr("path")][$(c).attr("name")]!="undefined"){var a=b.itemData[$(c).attr("path")][$(c).attr("name")];$(c).find("option").each(function(){if($(this).attr("value")==a){this.selected=true}else{if(this.selected){this.selected=false}}})}};uinv.FCM.configMgr.model.panel.itemConfigSetData.string=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));a.itemData[$(b).attr("path")][$(b).attr("name")]=$(b).val()};uinv.FCM.configMgr.model.panel.itemConfigSetData.number=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));a.itemData[$(b).attr("path")][$(b).attr("name")]=Number($(b).val())};uinv.FCM.configMgr.model.panel.itemConfigSetData.bool=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));if(b.checked){if(b.value=="1"){a.itemData[$(b).attr("path")][$(b).attr("name")]=true}else{a.itemData[$(b).attr("path")][$(b).attr("name")]=false}}};uinv.FCM.configMgr.model.panel.itemConfigSetData.color=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));a.itemData[$(b).attr("path")][$(b).attr("name")]=$(b).val()};uinv.FCM.configMgr.model.panel.itemConfigSetData.position3d=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));if(typeof a.itemData[$(b).attr("path")][$(b).attr("name")]=="undefined"||a.itemData[$(b).attr("path")][$(b).attr("name")].length==3){a.itemData[$(b).attr("path")][$(b).attr("name")]=[]}a.itemData[$(b).attr("path")][$(b).attr("name")].push($(b).val())};uinv.FCM.configMgr.model.panel.itemConfigSetData.position2d=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));if(typeof a.itemData[$(b).attr("path")][$(b).attr("name")]=="undefined"||a.itemData[$(b).attr("path")][$(b).attr("name")].length==2){a.itemData[$(b).attr("path")][$(b).attr("name")]=[]}a.itemData[$(b).attr("path")][$(b).attr("name")].push($(b).val())};uinv.FCM.configMgr.model.panel.itemConfigSetData.select=function(b){var c=uinv.FCM.configMgr;var d=uinv.FCM.configMgr.model.panel;var a=c.model.panel.keyFindObj($(b).attr("objectkey"));$(b).find("option").each(function(){if(this.selected){a.itemData[$(b).attr("path")][$(b).attr("name")]=$(this).attr("value")}})};uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml.string=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.panel;var e=typeof f.defaultItem=="undefined"?"":f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("panel/typeInputText.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,cate:"string"});return b};uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml.number=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.panel;var e=typeof f.defaultItem=="undefined"?"":f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("panel/typeInputText.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,cate:"number"});return b};uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml.bool=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.panel;var e=typeof f.defaultItem=="undefined"?false:f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("panel/typeBool.html",{key:d,isTrue:e,caption:a,name:f.name,objectKey:c,itemsTrueCaption:f.items.TRUE,itemsFalseCaption:f.items.FALSE});return b};uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml.color=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.panel;var e=typeof f.defaultItem=="undefined"?"#FFFFFF":f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("panel/typeInputText.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,cate:"color"});return b};uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml.position3d=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.panel;var e=typeof f.defaultItem=="undefined"?[0,0,0]:f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("panel/position3d.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,itemsCaption:f.items});return b};uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml.position2d=function(f,d,c){var g=uinv.FCM.configMgr;var h=uinv.FCM.configMgr.model.panel;var e=typeof f.defaultItem=="undefined"?[0,0]:f.defaultItem,a=typeof f.caption=="undefined"?f.name:f.caption,b="";b=g.template.load("panel/position2d.html",{key:d,value:e,caption:a,name:f.name,objectKey:c,itemsCaption:f.items});return b};uinv.FCM.configMgr.model.panel.itemConfigTypeToHtml.select=function(d,j,n){var f=uinv.FCM.configMgr;var e=uinv.FCM.configMgr.model.panel;var l=typeof d.caption=="undefined"?d.name:d.caption,h=typeof d.defaultItem=="undefined"?"":d.defaultItem,g=[],a=null;for(var c=0,b=d.items.length;c<b;c++){if(typeof d.itemsCaption=="object"&&typeof d.itemsCaption[c]!=="undefined"){tmpCaption=d.itemsCaption[c]}else{tmpCaption=d.items[c]}g.push({caption:tmpCaption,value:d.items[c]})}html=f.template.load("panel/typeSelect.html",{key:j,value:h,caption:l,name:d.name,objectKey:n,items:g});return html};uinv.FCM.configMgr.model.resources.upResourcesDir="/projects/resources";uinv.FCM.configMgr.model.resources.delFileArr=[];uinv.FCM.configMgr.model.resources.resourcesManagerClass="resourcesManager";uinv.FCM.configMgr.model.resources.setData=function(a,c){var b=uinv.FCM.configMgr;var d=this;b.data.resources[a]={serverPath:c.serverPath,localPath:c.localPath,version:c.version}};uinv.FCM.configMgr.model.resources.uploadResourcesFileCallback=function(a){var d=uinv.FCM.configMgr;var e=this;if(a.success){var c=e.getResourcesManagerFormData();if(c.type=="update"){var b=Number(c.version)+1;e.setResourcesManagerFormData("version",b)}e.resourcesManagerHandleCallback()}else{e.note.alert(a.data)}};uinv.FCM.configMgr.model.resources.checkForm=function(c){var b=uinv.FCM.configMgr;var d=this;var a={error:0,msg:[]};if(typeof c.title=="undefined"||c.title===""){a.error=1;a.msg.push(b.msg.S13)}if(typeof c.serverPath=="undefined"||c.serverPath===""){a.error=1;a.msg.push(b.msg.S14)}if(typeof c.version=="undefined"||c.version===""){a.error=1;a.msg.push(b.msg.S15)}if(typeof c.localPath=="undefined"||c.localPath===""){a.error=1;a.msg.push(b.msg.S16)}if(c.type=="create"&&(typeof c.resourcesFile=="undefined"||c.resourcesFile==="")){a.error=1;a.msg.push(b.msg.S17)}return a};uinv.FCM.configMgr.model.resources.resourcesManagerHandleCallback=function(){var b=uinv.FCM.configMgr;var c=this;var a=c.getResourcesManagerFormData();if(typeof b.data.resources[a.originalTitle]!="undefined"){delete b.data.resources[a.originalTitle]}c.setData(a.title,a);c.resourcesManagerClose();c.mkhtml()};uinv.FCM.configMgr.model.resources.handleResourcesManager=function(e){var g=uinv.FCM.configMgr;var h=this;var f=h.getResourcesManagerFormData();var d=h.checkForm(f);if(d.error){g.note.alert(d.msg.join("\r\n"));return false}if(f.resourcesFile!==""){var c=h.pathToFileNameAndFoder(f.serverPath);if((f.type=="create"&&h.serverPathFindObj(f.serverPath))||(f.type=="update"&&h.serverPathFindObj(f.serverPath)&&g.data.resources[f.originalTitle].serverPath!=f.serverPath)){g.note.alert(g.msg.F3(c.filename));return false}var b=true;if(f.type=="create"&&f.title in g.data.resources){b=g.note.confirm(g.msg.F4(f.title));if(b){h.delFileArr.push(g.data.resources[f.title].serverPath)}else{return false}}if(f.type=="create"||(f.type=="update"&&f.serverPath!=g.data.resources[f.originalTitle].serverPath)){var a=uinv.server.manager.frame.isFileExist(f.serverPath);if(a.data){b=g.note.confirm(g.msg.F5(c.filename));if(!b){return}}}if(f.type=="update"&&g.data.resources[f.originalTitle].serverPath!=f.serverPath){h.delFileArr.push(g.data.resources[f.originalTitle].serverPath)}uinv.server.manager.frame.upFile(f.resourcesObj,c.foder,c.filename,function(j){h.uploadResourcesFileCallback(j)})}else{h.resourcesManagerHandleCallback()}};uinv.FCM.configMgr.model.resources.serverPathFindObj=function(b){var c=uinv.FCM.configMgr;var d=this;for(var a in c.data.resources){if(c.data.resources[a].serverPath==b){return c.data.resources[a]}}return null};uinv.FCM.configMgr.model.resources.pathToFileNameAndFoder=function(c){var d=uinv.FCM.configMgr;var e=this;var a={};if(typeof c=="string"){var b=c.split("/");a.filename=b[b.length-1];b.pop();if(b.length>=1){a.foder=b.join("/")+"/"}else{a.foder=""}}else{a.filename="";a.foder=""}return a};uinv.FCM.configMgr.model.resources.resourcesManagerClose=function(){var a=uinv.FCM.configMgr;var b=this;a.model.dialog.close();a.form.saveData()};uinv.FCM.configMgr.model.resources.resourcesManager=function(b){var f=uinv.FCM.configMgr;var g=this;if(b&&typeof f.data.resources[b]=="undefined"){g.note.alert(f.msg.S10);return false}var e=b||"",c=b?"update":"create",a="",d=g.keyFindObj(b);a=f.template.load("resources/manager.html",{resourcesManagerClass:g.resourcesManagerClass,title:e,serverPath:d.serverPath,localPath:d.localPath,version:d.version,type:c});f.model.dialog.show(a)};uinv.FCM.configMgr.model.resources.keyFindObj=function(a){var c=uinv.FCM.configMgr;var d=this;var b={};if(typeof a=="undefined"||typeof c.data.resources[a]=="undefined"){b={title:"",serverPath:d.upResourcesDir,localPath:"",version:1}}else{b=c.data.resources[a]}return b};uinv.FCM.configMgr.model.resources.getResourcesManagerFormData=function(){var c=uinv.FCM.configMgr;var d=this;var b=c.model.dialog.getObj().find("."+d.resourcesManagerClass);if(b.find("input[name=resourcesFile]").val()!==""){var a=b.find("input[name=resourcesFile]").val().split("\\");b.find("input[name=serverPath]").val(d.upResourcesDir+"/"+a[a.length-1])}return{title:$.trim(b.find("input[name=title]").val()),originalTitle:b.find("input[name=title]").attr("original"),serverPath:$.trim(b.find("input[name=serverPath]").val()),originalServerPath:b.find("input[name=serverPath]").attr("original"),localPath:$.trim(b.find("input[name=localPath]").val()),resourcesFile:$.trim(b.find("input[name=resourcesFile]").val()),resourcesObj:b.find("input[name=resourcesFile]").get(0),version:$.trim(b.find("input[name=version]").val()),type:b.find("input[name=type]").val()}};uinv.FCM.configMgr.model.resources.setResourcesManagerFormData=function(a,c){var d=uinv.FCM.configMgr;var e=this;var b=d.model.dialog.getObj().find("."+e.resourcesManagerClass);b.find("input[name="+a+"]").val(c)};uinv.FCM.configMgr.model.resources.mkhtml=function(){var c=uinv.FCM.configMgr;var d=this;var b,a="";for(b in c.data.resources){a+=c.template.load("resources/tr.html",{i:b,url:c.global.projectPath+c.data.resources[b].serverPath,localPath:c.data.resources[b].localPath,version:c.data.resources[b].version,serverPath:c.data.resources[b].serverPath})}c.form.box.find(d.classStr).find("tr:gt(0)").remove();c.form.box.find(d.classStr).append(a);c.translate()};uinv.FCM.configMgr.model.resources.delResource=function(b){var c=uinv.FCM.configMgr;var d=this;var a=c.note.confirm(c.msg.S18);if(!a){return false}if(typeof c.data.resources[b]!="undefined"){uinv.server.manager.frame.delFile(c.data.resources[b].serverPath);delete c.data.resources[b]}d.mkhtml();c.form.saveData()};uinv.FCM.configMgr.model.resources.backupFiles=function(){var c=uinv.FCM.configMgr;var d=this;var b=[];for(var a in c.data.resources){b.push(c.data.resources[a].serverPath)}return b};uinv.FCM.configMgr.model.resources.init=function(a){var b=uinv.FCM.configMgr;var c=this;b.form.submitCallback=function(){while(c.delFileArr.length>=1){var d=c.delFileArr.pop();uinv.server.manager.frame.delFile(d)}};c.classStr=a||".resources-list";c.mkhtml()};uinv.FCM.configMgr.model.selector.publicSelectNodeSubmitCallback=null;uinv.FCM.configMgr.model.selector.classStr="";uinv.FCM.configMgr.model.selector.obj=null;uinv.FCM.configMgr.model.selector.index="selector";uinv.FCM.configMgr.model.selector.selectKey="";uinv.FCM.configMgr.model.selector.show=function(a){var b=uinv.FCM.configMgr;var c=this;c.publicSelectNodeSubmitCallback=a;b.model.dialog.show(b.template.load("selector/publicMain.html",{tree:c.publicShowHtml(c.obj.tree)}))};uinv.FCM.configMgr.model.selector.hide=function(){var a=uinv.FCM.configMgr;var b=this;a.model.dialog.close()};uinv.FCM.configMgr.model.selector.publicSelectNodeSubmit=function(){var d=uinv.FCM.configMgr;var e=this;var a=d.model.dialog.getObj().find(".tree").find(".ok");if(a.length==1){var b=a.attr("key");if(b&&b in e.obj.lib){if(typeof e.publicSelectNodeSubmitCallback=="function"){var c={name:e.obj.lib[b].name,where:{}};c.where[e.obj.lib[b].where]=e.obj.lib[b].formDataRemember[e.obj.lib[b].where];e.publicSelectNodeSubmitCallback(d.model.object.clone(c))}}else{d.note.alert(d.msg.S19)}}else{d.note.alert(d.msg.S20)}};uinv.FCM.configMgr.model.selector.publicSelectNode=function(b,a){var c=uinv.FCM.configMgr;var d=this;c.model.dialog.getObj().find(".tree").find(".ok").removeClass("ok");if(d.objIsExistWhere(a)){$(b).parents(".treeNode:eq(0)").addClass("ok")}else{c.note.alert(c.msg.S21)}};uinv.FCM.configMgr.model.selector.publicShowHtml=function(d){var f=uinv.FCM.configMgr;var h=this;var c="",b,a,g=false,e="";if(typeof d=="undefined"){return""}for(b=0,a=d.length;b<a;b++){if(typeof d[b].childrenNode=="object"){g=true;e=h.publicShowHtml(d[b].childrenNode)}c+=f.template.load("selector/publicTreeNode.html",{name:h.obj.lib[d[b].key].name,key:d[b].key,hasChildrenNode:g,childrenNode:e})}return c};uinv.FCM.configMgr.model.selector.cancelAddNodeWhere=function(a){var b=uinv.FCM.configMgr;var c=this;b.model.dialog.close();if(typeof a=="function"){a.apply(c)}};uinv.FCM.configMgr.model.selector.getAllClassID=function(){return uinv.factory.getAllClass()};uinv.FCM.configMgr.model.selector.getOneClassID=function(c){var d=uinv.FCM.configMgr;var e=this;var b=e.getAllClassID();for(var a in b){if(b[a].classId==c){return b[a]}}};uinv.FCM.configMgr.model.selector.nodeRename=function(b){var c=uinv.FCM.configMgr;var d=this;var a='<input type="text" value="'+d.obj.lib[b].name+'" />';d.keyFindNodeHtmlObj(b).find(">span").html(a).find("input").focus().blur(function(){d.obj.lib[b].name=$(this).val();$(this).parent().html(d.obj.lib[b].name)}).keydown(function(f){var g=f||window.event;if(g.keyCode==13){d.obj.lib[b].name=$(this).val();$(this).parent().html(d.obj.lib[b].name)}})};uinv.FCM.configMgr.model.selector.keyFindNodeHtmlObj=function(a){var b=uinv.FCM.configMgr;var c=this;if(a===""){return b.form.box.find(c.classStr)}else{return b.form.box.find(c.classStr).find("*[key="+a+"]")}};uinv.FCM.configMgr.model.selector.deleteNode=function(b){var d=uinv.FCM.configMgr;var e=this;var a=d.note.confirm(d.msg.S23);if(a){var c=e.keyFindTreeNodeObj(e.obj.tree,b);c.parent.splice(c.index,1);delete e.obj.lib[b];e.keyFindNodeHtmlObj(b).remove()}};uinv.FCM.configMgr.model.selector.createNode=function(a){var d=uinv.FCM.configMgr;var e=this;var b="";e.selectKey=a||"";if(typeof e.obj.lib=="undefined"){e.obj.lib={}}if(typeof e.obj.tree=="undefined"){e.obj.tree=[]}do{b=d.model.key.create()}while(b in e.obj.lib);var c={name:"新节点",key:b};e.insertNodeToTreeObj(c,a);e.insertNodeToTreeDom(c,a)};uinv.FCM.configMgr.model.selector.insertNodeToTreeObj=function(b,a){var e=uinv.FCM.configMgr,f=this,c={};if(a){var d=f.keyFindTreeNodeObj(f.obj.tree,a).obj;if(typeof d.childrenNode=="undefined"){d.childrenNode=[]}c=d.childrenNode}else{c=f.obj.tree}c.push({key:b.key});f.obj.lib[b.key]={name:b.name}};uinv.FCM.configMgr.model.selector.insertNodeToTreeDom=function(c,a){var d=uinv.FCM.configMgr;var e=this;var b=d.template.load("selector/node.html",{key:c.key,name:c.name});if(e.selectKey===""){d.form.box.find(e.classStr).append(b)}else{e.keyFindNodeHtmlObj(e.selectKey).find(">.childrenNode").append(b)}};uinv.FCM.configMgr.model.selector.keyFindTreeNodeObj=function(e,d){var f=uinv.FCM.configMgr;var g=this;for(var c=0,b=e.length;c<b;c++){if(e[c].key==d){return{obj:e[c],parent:e,index:c}}if(typeof e[c].childrenNode=="object"){var a=g.keyFindTreeNodeObj(e[c].childrenNode,d);if(a){return a}}}return false};uinv.FCM.configMgr.model.selector.recursionTreeHtml=function(d){var f=uinv.FCM.configMgr;var h=this;var c="",b,a,g=false,e="";for(b=0,a=d.length;b<a;b++){if(typeof d[b].childrenNode=="object"){g=true;e=h.recursionTreeHtml(d[b].childrenNode)}c+=f.template.load("selector/tree.html",{hasWhere:h.objIsExistWhere(d[b].key),key:d[b].key,name:h.obj.lib[d[b].key].name,hasChildrenNode:g,childrenNode:e})}return c};uinv.FCM.configMgr.model.selector.treeHtml=function(){var b=uinv.FCM.configMgr;var c=this;var a="";if(typeof c.obj.tree=="object"){a+=c.recursionTreeHtml(c.obj.tree)}b.template.load("selector/main.html",{tree:a});return a};uinv.FCM.configMgr.model.selector.addNodeWhereFormSubmit=function(a){var b=uinv.FCM.configMgr;var c=this;c.obj.lib[a].where=b.model.dialog.getObj().find("input[type=radio][name=wheretype]:checked").val();b.model.dialog.getObj().find("input[type=radio][name=wheretype]").each(function(){if(typeof c.whereTypeSetObj[$(this).val()]=="function"){c.whereTypeSetObj[$(this).val()](this,a)}});c.keyFindNodeHtmlObj(a).addClass("where");c.cancelAddNodeWhere()};uinv.FCM.configMgr.model.selector.objIsExistWhere=function(a){var b=uinv.FCM.configMgr;var c=this;if(a===""||typeof c.obj.lib[a].where=="undefined"){return false}return true};uinv.FCM.configMgr.model.selector.addNodeWhereFormInit=function(a){var b=uinv.FCM.configMgr;var c=this;if(c.objIsExistWhere(a)){b.model.dialog.getObj().find("input[type=radio][name=wheretype][value="+c.obj.lib[a].where+"]").attr("checked",true)}};uinv.FCM.configMgr.model.selector.formDataRememberInit=function(a){var b=uinv.FCM.configMgr;var c=this;c.obj.lib[a].formDataRemember={classid:0,name:"",attribute:[{key:"",value:""}],fun:""}};uinv.FCM.configMgr.model.selector.delNodeWhere=function(a){var b=uinv.FCM.configMgr;var c=this;if(a||a in c.obj.lib){delete c.obj.lib[a].where;c.keyFindNodeHtmlObj(a).removeClass("where")}};uinv.FCM.configMgr.model.selector.editNodeWhere=function(b){var c=uinv.FCM.configMgr;var d=this;var a="";if(!b||!(b in d.obj.lib)){return false}if(b in d.obj.lib&&typeof d.obj.lib[b].formDataRemember=="undefined"){d.formDataRememberInit(b)}a=c.template.load("selector/editWhere.html",{fun:d.obj.lib[b].formDataRemember.fun,name:d.obj.lib[b].formDataRemember.name,attrKey:d.obj.lib[b].formDataRemember.attribute[0].key,attrValue:d.obj.lib[b].formDataRemember.attribute[0].value,classids:d.getAllClassID(),classid:d.obj.lib[b].formDataRemember.classid,key:b});c.model.dialog.show(a);d.addNodeWhereFormInit(b)};uinv.FCM.configMgr.model.selector.contextMenu=function(a,d){var f=uinv.FCM.configMgr;var h=this;var g=d;var c=a||window.event;var b="";if(c.preventDefault){c.preventDefault()}if(c.stopPropagation){c.stopPropagation()}else{c.returnValue=false;c.cancelBubble=true}f.form.box.find(h.classStr).find(".ok").removeClass("ok");if($(g).parent().attr("key")){b=$(g).parent().attr("key");h.selectNode(b,c)}h.contextMenuShow(c,b);return false};uinv.FCM.configMgr.model.selector.treeNodeShow=function(a){var b=uinv.FCM.configMgr;var c=this;c.keyFindNodeHtmlObj(a).removeClass("childrenNodeHide").find(">.childrenNode").show()};uinv.FCM.configMgr.model.selector.treeNodeHide=function(a){var b=uinv.FCM.configMgr;var c=this;c.keyFindNodeHtmlObj(a).addClass("childrenNodeHide").find(">.childrenNode").hide()};uinv.FCM.configMgr.model.selector.contextMenuRouting=function(fun,key){var _obj=uinv.FCM.configMgr;var _this=this;_this.contextMenuHide();eval("_this."+fun+"('"+key+"');")};uinv.FCM.configMgr.model.selector.getContextMenuHtml=function(c,b){var d=uinv.FCM.configMgr;var f=this;var a="";a=d.template.load("selector/contextmenu.html",{x:c.clientX-d.form.box.offset().left,y:c.clientY-d.form.box.offset().top,selectNode:b&&b in f.obj.lib,hasChildrenNode:f.keyFindNodeHtmlObj(b).find(">.childrenNode>.treeNode").length>=1,childrenNodeVisible:f.keyFindNodeHtmlObj(b).find(">.childrenNode").is(":visible"),key:b,hasWhere:f.objIsExistWhere(b)});return a};uinv.FCM.configMgr.model.selector.contextMenuShow=function(c,b){var d=uinv.FCM.configMgr;var f=this;f.contextMenuHide();var a=f.getContextMenuHtml(c,b);d.form.box.append(a);d.translate()};uinv.FCM.configMgr.model.selector.contextMenuHide=function(){var a=uinv.FCM.configMgr;var b=this;a.form.box.find(".config-contextmenu").remove()};uinv.FCM.configMgr.model.selector.selectNode=function(b,a){var d=uinv.FCM.configMgr;var f=this;var c=a||window.event;if(c.preventDefault){c.preventDefault()}if(c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}f.contextMenuHide();f.cancelSelectNode();f.selectKey=b;f.keyFindNodeHtmlObj(b).addClass("ok")};uinv.FCM.configMgr.model.selector.cancelSelectNode=function(){var a=uinv.FCM.configMgr;var b=this;b.selectKey="";a.form.box.find(b.classStr).find(".ok").removeClass("ok")};uinv.FCM.configMgr.model.selector.init=function(a){var b=uinv.FCM.configMgr;var c=this;b.form.submitCallback=function(){b.model.stringDB.set(c.index,c.obj,function(){})};c.obj=b.model.stringDB.get(c.index);c.classStr=a;b.form.box.find(c.classStr).html(c.treeHtml());b.form.box.find(c.classStr).click(function(){c.cancelSelectNode();c.contextMenuHide()});$(".config-info").html(b.msg.S22)};uinv.FCM.configMgr.model.selector.whereTypeSetObj.classid=function(b,a){var c=uinv.FCM.configMgr;var d=c.model.selector;d.obj.lib[a].formDataRemember.classid=Number($(b).parents(".row").find("select[name=classid]").val())};uinv.FCM.configMgr.model.selector.whereTypeSetObj.name=function(b,a){var c=uinv.FCM.configMgr;var d=c.model.selector;d.obj.lib[a].formDataRemember.name=$(b).parents(".row").find("input[name=name]").val()};uinv.FCM.configMgr.model.selector.whereTypeSetObj.attribute=function(b,a){var c=uinv.FCM.configMgr;var d=c.model.selector;d.obj.lib[a].formDataRemember.attribute=[{key:$(b).parents(".row").find("input[name=key]").val(),value:$(b).parents(".row").find("input[name=value]").val()}]};uinv.FCM.configMgr.model.selector.whereTypeSetObj.fun=function(b,a){var c=uinv.FCM.configMgr;var d=c.model.selector;d.obj.lib[a].formDataRemember.fun=$(b).parents(".row").find("textarea[name=fun]").val()};uinv.FCM.configMgr.model.statistics.classStr="";uinv.FCM.configMgr.model.statistics.where=["<"];uinv.FCM.configMgr.model.statistics.nameDisplay={availableU:u.le.get("空间"),load:u.le.get("承重"),power:u.le.get("功耗")};uinv.FCM.configMgr.model.statistics.defaultColor="#FFFFFF";uinv.FCM.configMgr.model.statistics.delRow=function(a){var b=uinv.FCM.configMgr;var c=this;$(a).parents("tr").remove()};uinv.FCM.configMgr.model.statistics.addRow=function(c){var e=uinv.FCM.configMgr;var f=this;var b={number:"",color:"#FFF",where:f.where[0]};var a=f.mkhtmlTr(b);$(c).parents(".list").find("table").append(a);var d=$(c).parents(".list").find("table").find("tr:last").find("input[key=color]").get(0);e.model.colorpicke.show(d)};uinv.FCM.configMgr.model.statistics.mkhtmlTr=function(a){var b=uinv.FCM.configMgr;var c=this;if(typeof a!="object"){a={}}a.where=typeof a.where=="undefined"?c.where[0]:a.where;a.color=typeof a.color=="undefined"?c.defaultColor:a.color;a.number=typeof a.number=="undefined"?"":a.number;return b.template.load("statistics/tr.html",{where:a.where,color:a.color,number:a.number,range:c.where})};uinv.FCM.configMgr.model.statistics.mkhtml=function(){var d=uinv.FCM.configMgr;var e=this;var c,b,a=[];for(c in d.data.statistics){b=d.template.load("statistics/list.html",{name:e.nameDisplay[c],key:c});a.push(b)}d.form.box.find(e.classStr).html(a.join(d.template.load("line1.html")));d.translate()};uinv.FCM.configMgr.model.statistics.init=function(a){var b=uinv.FCM.configMgr;var c=this;c.classStr=a;c.mkhtml()};uinv.FCM.configMgr.model.string.varFixSub=function(c){c=$.trim(c);var b=c.substr(0,1);if(b!=="["&&b!=="{"){var a=c.indexOf("=")+1;c=c.substr(a)}return c};uinv.FCM.configMgr.model.stringDB.readString=function(){return uinv.server.manager.frame.getString()};uinv.FCM.configMgr.model.stringDB.writeString=function(c,a){var b=uinv.FCM.configMgr;var d=this;uinv.server.manager.frame.saveString(c,false,function(e){if(e.success){if(typeof a=="function"){a.apply(d)}}else{b.note.alert(e.data)}})};uinv.FCM.configMgr.model.stringDB.get=function(b){var f=uinv.FCM.configMgr;var g=this;var a=g.readString();if(a.success){try{var d=f.model.transform.str2obj(a.data);if(typeof(d[b])=="undefined"){return{}}else{return d[b]}}catch(c){return{}}}else{f.note.alert("stringDB.get() : "+a.data);return{}}};uinv.FCM.configMgr.model.stringDB.set=function(d,e,b){var g=uinv.FCM.configMgr;var h=this;if(typeof e=="undefined"){return false}var a=h.readString();var c={};if(a.success){if(a.data){c=g.model.transform.str2obj(a.data)}c[d]=e;var f=g.model.transform.obj2str(c);if(typeof f=="string"&&f!==""){h.writeString(f,b)}else{g.note.alert(g.msg.S26)}}else{g.note.alert(a.data)}};uinv.FCM.configMgr.model.transform.obj2str=function(e){var d=uinv.FCM.configMgr;var f=this;var b,a;if(typeof e=="undefined"){return'""'}var c=[];if(typeof e=="string"){return'"'+e.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'}if(typeof e=="object"){if(!e.sort){for(b in e){c.push('"'+b+'":'+f.obj2str(e[b]))}if(!!document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(e.toString)){c.push("toString:"+e.toString.toString())}c="{"+c.join()+"}"}else{for(b=0,a=e.length;b<a;b++){c.push(f.obj2str(e[b]))}c="["+c.join()+"]"}return c}return e.toString()};uinv.FCM.configMgr.model.transform.str2obj=function(s){var _obj=uinv.FCM.configMgr;var _this=this;if(typeof s=="string"){s=s.replaceAll("\r\n","");s=s.replaceAll("\n","");s=s.replaceAll("\t","");try{return eval("(function(){ return  "+s+" })();")}catch(e){return false}}else{return false}};uinv.FCM.configMgr.model.viewpoint.classStr="";uinv.FCM.configMgr.model.viewpoint.createObject=function(){var a=uinv.FCM.configMgr;var b=this;a.model.selector.show(function(c){a.model.selector.cancelAddNodeWhere();var d=b.addObjectToMemory(c);b.addHtmlRow(d)})};uinv.FCM.configMgr.model.viewpoint.keyFindObj=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.viewpoint.length;b<a;b++){if(d.data.viewpoint[b].key==c){return d.data.viewpoint[b]}}return false};uinv.FCM.configMgr.model.viewpoint.keyFindIndex=function(c){var d=uinv.FCM.configMgr;var e=this;for(var b=0,a=d.data.viewpoint.length;b<a;b++){if(d.data.viewpoint[b].key==c){return b}}return -1};uinv.FCM.configMgr.model.viewpoint.createKey=function(){var b=uinv.FCM.configMgr;var c=this;var a="";do{a=b.model.key.create(32)}while(c.keyFindObj(a));return a};uinv.FCM.configMgr.model.viewpoint.addObjectToMemory=function(a){var c=uinv.FCM.configMgr;var d=this;var b={name:a.name,where:a.where,key:d.createKey(),data:{x:0,y:0,z:0}};c.data.viewpoint.push(b);return b};uinv.FCM.configMgr.model.viewpoint.addHtmlRow=function(a){var b=uinv.FCM.configMgr;var c=this;b.form.box.find(c.classStr).append(c.mkhtmlRow(a));b.translate()};uinv.FCM.configMgr.model.viewpoint.mkhtmlRow=function(a){var b=uinv.FCM.configMgr;var c=this;return b.template.load("viewpoint.html",a)};uinv.FCM.configMgr.model.viewpoint.mkhtml=function(){var d=uinv.FCM.configMgr;var e=this;var c="";for(var b=0,a=d.data.viewpoint.length;b<a;b++){c+=e.mkhtmlRow(d.data.viewpoint[b])}d.form.box.find(e.classStr).find("tr:gt(0)").remove();d.form.box.find(e.classStr).append(c);d.translate()};uinv.FCM.configMgr.model.viewpoint.objectRename=function(c,b){var e=uinv.FCM.configMgr;var f=this;var d=$(c).parent();var a=d.html();d.html(e.template.load("input_text.html",{value:$(c).html()}));d.find("input").focus().blur(function(){f.keyFindObj(b).name=$(this).val();d.html(a);d.find("span").html($(this).val())}).keydown(function(g){var h=g||window.event;if(h.keyCode==13){f.keyFindObj(b).name=$(this).val();d.html(a);d.find("span").html($(this).val())}})};uinv.FCM.configMgr.model.viewpoint.objectDelete=function(d,c){var e=uinv.FCM.configMgr;var f=this;var a=e.note.confirm(e.msg.S24);if(a){var b=f.keyFindIndex(c);e.data.viewpoint.splice(b,1);$(d).parents("*[key="+c+"]").remove()}};uinv.FCM.configMgr.model.viewpoint.init=function(a){var b=uinv.FCM.configMgr;var c=this;c.classStr=a||"";c.mkhtml()};uinv.FCM.configMgr.msg.S1="下载配置";uinv.FCM.configMgr.msg.S2="正在打包...";uinv.FCM.configMgr.msg.S3="错误(S3)：您上传的备份文件有错误，请重新上传正确备份的zip压缩包文件！";uinv.FCM.configMgr.msg.S4="错误(S4)：您上传的备份配置信息数据格式错误，不能执行恢复操作！";uinv.FCM.configMgr.msg.S5="警告(S5)：删除后不可以恢复，确认删除此图片？";uinv.FCM.configMgr.msg.S6="错误(S6)：同样条件的物体已存在，不能重复创建重复条件的物体！";uinv.FCM.configMgr.msg.S7="错误(S7)：请指定要操作的物体！";uinv.FCM.configMgr.msg.S8="警告(S8)：此操作将会把所有物体下同名项一并删除，继续删除吗？";uinv.FCM.configMgr.msg.S9="错误(S9)：此项不可编辑配置！";uinv.FCM.configMgr.msg.S10="错误(S10)：物体不存在！";uinv.FCM.configMgr.msg.S11="错误(S11)：数据格式验证不通过！";uinv.FCM.configMgr.msg.S12="错误(S12)：不能克隆对象！";uinv.FCM.configMgr.msg.S13="错误(S13)：资源名称不能为空！";uinv.FCM.configMgr.msg.S14="错误(S14)：服务器路径不能为空！";uinv.FCM.configMgr.msg.S15="错误(S15)：版本号不能为空！";uinv.FCM.configMgr.msg.S16="错误(S16)：本地路径不能为空 ！";uinv.FCM.configMgr.msg.S17="错误(S17)：资源包不能为空！";uinv.FCM.configMgr.msg.S18="警告(S18)：删除资源包不可恢复，确认删除吗？";uinv.FCM.configMgr.msg.S19="错误(S19)：系统异常！";uinv.FCM.configMgr.msg.S20="错误(S20)：请选择节点！";uinv.FCM.configMgr.msg.S21="错误(S21)：未添加条件的节点不能选择！";uinv.FCM.configMgr.msg.S22="节点字体加粗表示已添加条件";uinv.FCM.configMgr.msg.S23="警告(S23)：此操作将会将节点及它的子节点彻底删除，确认删除吗？";uinv.FCM.configMgr.msg.S24="警告(S24)：此操作将会将会删除此物体及物体的视角配置信息，确认删除吗？";uinv.FCM.configMgr.msg.S25="错误(S25)：Form数据定义占用系统关键字！";uinv.FCM.configMgr.msg.S26="错误(S26)：副数据转换string异常！";uinv.FCM.configMgr.msg.S27="错误(S27)：删除面板错误：这个面板正在使用，请先解除使用后再删除！";uinv.FCM.configMgr.msg.S28="错误(S28)：上传失败！";uinv.FCM.configMgr.msg.F1=function(a){return"警告(F1)：恢复操作将会把上传的配置信息覆盖当前系统的配置信息不可恢复\r\n确认继续"+a+"配置恢复操作？"};uinv.FCM.configMgr.msg.F2=function(a){return"警告(F2)："+a+"图片已存在，是否要覆盖旧的图片？"};uinv.FCM.configMgr.msg.F3=function(a){return"错误(F3)："+a+"资源已存在！"};uinv.FCM.configMgr.msg.F4=function(a){return"警告(F4)："+a+"资源已存在，要覆盖旧的资源项吗？"};uinv.FCM.configMgr.msg.F5=function(a){return"警告(F5)：同名资源包 "+a+" 已存在服务器，要覆盖旧的资源包吗？"};uinv.FCM.configMgr.msg.F6=function(a){return"警告(F6): 此操作将会删除原"+a+"的配置信息，是否要继续操作？"};uinv.FCM.configMgr.msg.F7=function(a){return"警告(F7): "+a+"已经存在，是否要覆盖？"};uinv.FCM.configMgr.msg.F8=function(c,b,a){return"错误(F8):"+c+" -> "+b+" -> attribute "+a+" 字段不存在 !"};uinv.FCM.configMgr.msg.F9=function(b,a,c){return"错误(F9):"+b+" -> "+a+" -> row "+c+" 超出modifyCount的值 !"};uinv.FCM.configMgr.msg.F10=function(a){return"警告(F10):您上传的新面板modifyCount比原面板modifyCount小，将要删除原面板配置信息的最后"+a+"行配置？"};uinv.FCM.configMgr.note.alert=function(a){alert(u.le.get(a))};uinv.FCM.configMgr.note.confirm=function(a){return confirm(u.le.get(a))};uinv.FCM.configMgr.note.dialog=function(c){var b=uinv.FCM.configMgr,d=this,a="";a=b.template.load("note.html",{msg:u.le.get(c)});uinv.FCM.configMgr.model.dialog.show(a)};uinv.FCM.configMgr.other.conditionReplaceName=function(d){var c=uinv.FCM.configMgr;var f=this;for(var b in d){switch(b){case"classid":d.REGTYPE_CLASSID=d[b];delete d[b];break;case"name":d.REGTYPE_OBJECT=d[b];delete d[b];break;case"attribute":d.REGTYPE_ATTRIBUTE={};for(var e=0,a=d[b].length;e<a;e++){d.REGTYPE_ATTRIBUTE[d[b][e].key]=d[b][e].value}delete d[b];break;case"fun":d.REGTYPE_FUNCTION=d[b];delete d[b];break}}return d};uinv.FCM.configMgr.template.cache={};uinv.FCM.configMgr.template.cacheEnable=true;uinv.FCM.configMgr.template.publicPath="./javascripts/frontendConfigManager/templates";uinv.FCM.configMgr.template.get=function(b){var d=uinv.FCM.configMgr,e=this,c="",a;if(b.substring(0,1)!="/"){b="/"+b}c=e.publicPath+b;if(e.cacheEnable&&(c in e.cache)){a=e.cache[c]}else{a=$.ajax({url:c,async:false});if(a.readyState===4&&a.status===200){if(e.cacheEnable){e.cache[c]=$.trim(a.responseText)}a=$.trim(a.responseText)}else{d.note.alert(a.statusText);throw new Error(a.statusText)}}return a};uinv.FCM.configMgr.template.load=function(a,b){var c=uinv.FCM.configMgr,d=this;return Handlebars.compile(d.get(a))(b)};uinv.FCM.configMgr.translate=function(){$("s").each(function(){if($(this).html!==""){$(this).replaceWith(u.le.get($(this).html()))}})};